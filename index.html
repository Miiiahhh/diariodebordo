<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Refra√ß√µes da Maya - RPG Completo</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #2c3e50;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            min-height: 100vh;
            box-shadow: 0 0 30px rgba(0,0,0,0.3);
        }
        
        .navbar {
            background: linear-gradient(90deg, #2c3e50, #34495e);
            color: white;
            padding: 1rem 2rem;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .navbar h1 {
            font-size: 1.8rem;
            margin-bottom: 0.5rem;
        }
        
        .nav-menu {
            display: flex;
            gap: 2rem;
            flex-wrap: wrap;
        }
        
        .nav-item {
            color: white;
            text-decoration: none;
            padding: 0.5rem 1rem;
            border-radius: 5px;
            transition: background 0.3s;
            cursor: pointer;
        }
        
        .nav-item:hover, .nav-item.active {
            background: rgba(255,255,255,0.2);
        }
        
        .content {
            padding: 2rem;
            display: none;
        }
        
        .content.active {
            display: block;
        }
        
        .hero {
            text-align: center;
            padding: 3rem 0;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            margin: -2rem -2rem 2rem -2rem;
        }
        
        .hero h2 {
            font-size: 2.5rem;
            color: #2c3e50;
            margin-bottom: 1rem;
        }
        
        .hero p {
            font-size: 1.2rem;
            color: #7f8c8d;
            max-width: 600px;
            margin: 0 auto;
        }
        
        /* Ficha de Personagem */
        .character-sheet {
            background: white;
            border: 3px solid #34495e;
            border-radius: 15px;
            overflow: hidden;
            margin: 2rem 0;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }
        
        .sheet-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 2rem;
            text-align: center;
            position: relative;
        }
        
        .character-name-input {
            background: transparent;
            border: none;
            color: white;
            font-size: 2.5rem;
            font-weight: bold;
            text-align: center;
            width: 100%;
            margin-bottom: 0.5rem;
        }
        
        .character-class-input {
            background: transparent;
            border: none;
            color: white;
            font-size: 1.2rem;
            text-align: center;
            width: 100%;
            opacity: 0.9;
        }
        
        .sheet-content {
            padding: 2rem;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }
        
        .stat-box {
            border: 2px solid #bdc3c7;
            border-radius: 10px;
            padding: 1.5rem;
            background: #ecf0f1;
            transition: transform 0.2s;
        }
        
        .stat-box:hover {
            transform: translateY(-2px);
        }
        
        .stat-label {
            font-weight: bold;
            color: #34495e;
            margin-bottom: 0.5rem;
            text-transform: uppercase;
            font-size: 0.9rem;
            letter-spacing: 1px;
        }
        
        .stat-input {
            border: 1px solid #95a5a6;
            padding: 0.8rem;
            background: white;
            border-radius: 5px;
            width: 100%;
            font-size: 1rem;
            transition: border-color 0.3s;
        }
        
        .stat-input:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 5px rgba(52, 152, 219, 0.3);
        }
        
        .abilities-section {
            margin: 3rem 0;
        }
        
        .section-title {
            background: linear-gradient(90deg, #34495e, #2c3e50);
            color: white;
            padding: 1rem 2rem;
            margin: 2rem -2rem 1.5rem -2rem;
            font-size: 1.5rem;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .ability-category {
            margin: 2rem 0;
        }
        
        .category-header {
            background: #3498db;
            color: white;
            padding: 1rem 1.5rem;
            font-weight: bold;
            font-size: 1.2rem;
            border-radius: 10px 10px 0 0;
        }
        
        .ability-card {
            border: 2px solid #3498db;
            background: white;
            margin-bottom: 0;
            padding: 1.5rem;
            border-top: none;
        }
        
        .ability-card:last-child {
            border-radius: 0 0 10px 10px;
        }
        
        .ability-name {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }
        
        .ability-name-input {
            background: transparent;
            border: none;
            font-weight: bold;
            color: #2c3e50;
            font-size: 1.2rem;
            flex-grow: 1;
        }
        
        .ability-type {
            background: #e74c3c;
            color: white;
            padding: 0.3rem 1rem;
            border-radius: 15px;
            font-size: 0.8rem;
            margin-left: 1rem;
        }
        
        .ability-type.passive { background: #27ae60; }
        .ability-type.utility { background: #f39c12; }
        
        .ability-description textarea,
        .ability-mechanics textarea,
        .visual-desc textarea {
            border: 1px solid #bdc3c7;
            border-radius: 5px;
            padding: 1rem;
            width: 100%;
            min-height: 80px;
            resize: vertical;
            font-family: inherit;
            font-size: 0.95rem;
            transition: border-color 0.3s;
        }
        
        .ability-description textarea:focus,
        .ability-mechanics textarea:focus,
        .visual-desc textarea:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 5px rgba(52, 152, 219, 0.3);
        }
        
        .ability-mechanics {
            background: #f8f9fa;
            padding: 1rem;
            border-radius: 5px;
            border-left: 4px solid #3498db;
            margin: 1rem 0;
        }
        
        .visual-desc {
            border-top: 1px dashed #bdc3c7;
            padding-top: 1rem;
            margin-top: 1rem;
        }
        
        /* Controles de Salvamento */
        .save-controls {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            display: flex;
            gap: 1rem;
            z-index: 1000;
        }
        
        .save-btn {
            background: #3498db;
            color: white;
            border: none;
            padding: 1rem;
            border-radius: 50px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: bold;
            transition: all 0.3s;
            box-shadow: 0 3px 10px rgba(0,0,0,0.2);
        }
        
        .save-btn:hover {
            background: #2980b9;
            transform: translateY(-2px);
        }
        
        .save-btn.danger {
            background: #e74c3c;
        }
        
        .save-btn.danger:hover {
            background: #c0392b;
        }
        
        .save-indicator {
            position: fixed;
            top: 2rem;
            right: 2rem;
            background: #27ae60;
            color: white;
            padding: 1rem 1.5rem;
            border-radius: 10px;
            opacity: 0;
            transition: opacity 0.3s;
            z-index: 1001;
        }
        
        /* Se√ß√µes do Guia */
        .guide-section {
            margin: 2rem 0;
        }
        
        .guide-section h2 {
            color: #2c3e50;
            font-size: 2rem;
            margin: 2rem 0 1rem 0;
            border-bottom: 3px solid #3498db;
            padding-bottom: 0.5rem;
        }
        
        .guide-section h3 {
            color: #34495e;
            font-size: 1.5rem;
            margin: 1.5rem 0 1rem 0;
            border-left: 5px solid #e74c3c;
            padding-left: 1rem;
        }
        
        .guide-section h4 {
            color: #2c3e50;
            font-size: 1.2rem;
            margin: 1rem 0 0.5rem 0;
            background: #ecf0f1;
            padding: 0.8rem 1rem;
            border-radius: 5px;
        }
        
        .info-box {
            border: 2px solid #3498db;
            border-radius: 10px;
            margin: 1.5rem 0;
            overflow: hidden;
        }
        
        .info-header {
            background: linear-gradient(90deg, #3498db, #2980b9);
            color: white;
            padding: 1rem 1.5rem;
            font-weight: bold;
            font-size: 1.1rem;
        }
        
        .info-content {
            padding: 1.5rem;
            background: white;
        }
        
        .adventure-box {
            border: 3px solid #e74c3c;
            border-radius: 15px;
            margin: 2rem 0;
            overflow: hidden;
        }
        
        .adventure-header {
            background: linear-gradient(90deg, #e74c3c, #c0392b);
            color: white;
            padding: 1.5rem;
            font-weight: bold;
            font-size: 1.3rem;
        }
        
        .adventure-content {
            padding: 2rem;
            background: white;
        }
        
        .scenario {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            padding: 1.5rem;
            border-radius: 10px;
            margin: 1rem 0;
        }
        
        .scenario-title {
            font-weight: bold;
            color: #856404;
            margin-bottom: 0.5rem;
            font-size: 1.1rem;
        }
        
        .timeline {
            border-left: 4px solid #3498db;
            margin: 2rem 0;
            padding-left: 2rem;
        }
        
        .timeline-item {
            margin: 1.5rem 0;
            position: relative;
            padding: 1rem;
            background: #f8f9fa;
            border-radius: 5px;
        }
        
        .timeline-item::before {
            content: '‚óè';
            position: absolute;
            left: -2.5rem;
            color: #3498db;
            font-size: 1.5rem;
            top: 1rem;
        }
        
        .quote {
            font-style: italic;
            color: #7f8c8d;
            text-align: center;
            margin: 2rem 0;
            padding: 2rem;
            border-left: 4px solid #3498db;
            background: #f8f9fa;
            border-radius: 10px;
            font-size: 1.1rem;
        }
        
        .city-edit-section {
            margin: 2rem 0;
            animation: fadeIn 0.3s ease-in;
        }
        
        .adventure-edit-box {
            border: 3px solid #e74c3c;
            border-radius: 15px;
            margin: 2rem 0;
            overflow: hidden;
            animation: fadeIn 0.3s ease-in;
        }
        
        .adventure-edit-box .adventure-header {
            background: linear-gradient(90deg, #e74c3c, #c0392b);
            color: white;
            padding: 1.5rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .adventure-edit-box .adventure-content {
            padding: 2rem;
            background: white;
        }
        
        .adventure-edit-box h4 {
            color: #2c3e50;
            margin-bottom: 0.5rem;
            font-size: 1.1rem;
            border-left: 4px solid #3498db;
            padding-left: 1rem;
            background: #ecf0f1;
            padding: 0.5rem 1rem;
            border-radius: 5px;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Anima√ß√µes do Mapa SVG */
        .city-node {
            transition: all 0.3s ease;
            transform-origin: center;
        }
        
        .city-node:hover {
            transform: scale(1.1);
            filter: brightness(1.2);
        }
        
        .city-node:hover circle,
        .city-node:hover rect {
            stroke-width: 4;
            filter: drop-shadow(0 0 10px rgba(255,255,255,0.3));
        }
        
        .city-node:active {
            transform: scale(0.95);
        }
        
        .city-node.active-city circle,
        .city-node.active-city rect {
            stroke: #f1c40f !important;
            stroke-width: 4 !important;
            filter: drop-shadow(0 0 15px rgba(241, 196, 15, 0.6));
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { stroke-width: 4; }
            50% { stroke-width: 6; }
            100% { stroke-width: 4; }
        }
        
        /* Localiza√ß√£o especial de Maya */
        .maya-location {
            filter: drop-shadow(0 0 10px rgba(241, 196, 15, 0.3));
        }
        
        .maya-location:hover {
            filter: drop-shadow(0 0 15px rgba(241, 196, 15, 0.6));
        }
        
        /* Mapa responsivo melhorado */
        .map-container {
            transition: all 0.3s ease;
            animation: mapFadeIn 1s ease-out;
        }
        
        /* Esconder informa√ß√£o de perigo mobile no desktop */
        .map-container::after {
            display: none;
        }
        
        @keyframes mapFadeIn {
            from { 
                opacity: 0; 
                transform: translateY(30px) scale(0.95); 
            }
            to { 
                opacity: 1; 
                transform: translateY(0) scale(1); 
            }
        }
        
        .map-container:hover {
            transform: translateY(-2px);
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
        }
        
        .concept-visual {
            border: 2px dashed #95a5a6;
            padding: 2rem;
            margin: 2rem 0;
            background: #f8f9fa;
            border-radius: 15px;
            text-align: center;
        }
        
        .concept-title {
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 1rem;
            font-size: 1.2rem;
        }
        
        .concept-description {
            color: #7f8c8d;
            font-style: italic;
            line-height: 1.8;
        }
        
        .stats-display {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin: 2rem 0;
        }
        
        .stat-display {
            text-align: center;
            padding: 1rem;
            background: #ecf0f1;
            border-radius: 10px;
            border: 1px solid #bdc3c7;
        }
        
        .stat-display-label {
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 0.5rem;
            text-transform: uppercase;
            font-size: 0.9rem;
        }
        
        .stat-display-value {
            font-size: 1.5rem;
            color: #e74c3c;
            font-weight: bold;
        }
        
        /* Estilos para imagens da Maya */
        .maya-character-image {
            max-width: 100%;
            height: auto;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .maya-character-image:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.3);
        }
        
        .maya-image-container {
            text-align: center;
            margin: 1rem 0;
        }
        
        .maya-image-caption {
            margin-top: 0.5rem;
            font-style: italic;
            color: #7f8c8d;
            font-size: 0.9rem;
        }
        
        @media (max-width: 768px) {
            .container {
                margin: 0;
                border-radius: 0;
            }
            
            .navbar {
                padding: 1rem;
            }
            
            .nav-menu {
                gap: 0.5rem;
                font-size: 0.9rem;
            }
            
            .nav-item {
                padding: 0.4rem 0.8rem;
                font-size: 0.8rem;
            }
            
            .content {
                padding: 1rem;
            }
            
            .hero {
                margin: -1rem -1rem 2rem -1rem;
                padding: 2rem 1rem;
            }
            
            .hero h2 {
                font-size: 2rem;
            }
            
            .character-name-input {
                font-size: 2rem;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
                gap: 1rem;
            }
            
            .save-controls {
                bottom: 1rem;
                right: 1rem;
                flex-direction: column;
            }
            
            .section-title {
                margin-left: -1rem;
                margin-right: -1rem;
                font-size: 1.2rem;
            }
            
            /* Mapa responsivo */
            .map-container {
                max-width: 100% !important;
                padding: 1.5rem !important;
                margin: 1rem auto !important;
            }
            
            .map-container svg {
                min-height: 250px !important;
            }
            
            .map-container text {
                font-size: 8px !important;
            }
            
            .map-container circle,
            .map-container rect {
                stroke-width: 2 !important;
            }
            
            /* Esconder indicador de perigo no desktop e mostrar no mobile de forma diferente */
            .map-container div[style*="position: absolute; top: 1rem; right: 1rem"] {
                display: none !important;
            }
            
            /* Legenda responsiva */
            .map-container div[style*="grid-template-columns: 1fr 1fr"] {
                grid-template-columns: 1fr !important;
                gap: 0.5rem !important;
            }
            
            /* Rotas responsivas */
            .map-container div[style*="grid-template-columns: repeat(auto-fit, minmax(200px, 1fr))"] {
                grid-template-columns: 1fr !important;
                gap: 0.5rem !important;
            }
            
            /* Adicionar informa√ß√£o de perigo no mobile ap√≥s as rotas */
            .map-container::after {
                content: "‚ö†Ô∏è N√≠veis de Perigo: üü¢ Baixo üü° M√©dio üî¥ Alto üü£ Extremo" !important;
                display: block !important;
                text-align: center;
                margin-top: 1rem;
                padding: 0.8rem;
                background: rgba(44, 62, 80, 0.9);
                color: #ecf0f1;
                border-radius: 8px;
                font-size: 0.8rem;
            }
            
            /* Aventuras responsivas */
            .adventure-edit-box .adventure-header {
                flex-direction: column;
                gap: 1rem;
                text-align: center;
            }
            
            .adventure-edit-box .adventure-header input {
                width: 100% !important;
                text-align: center;
            }
            
            .adventure-edit-box .adventure-content {
                padding: 1rem;
            }
            
            .adventure-edit-box h4 {
                font-size: 1rem;
                padding: 0.4rem 0.8rem;
            }
            
            /* Imagens responsivas da Maya */
            .maya-character-image {
                max-width: 100% !important;
            }
            
            .maya-image-container div[style*="max-width"] {
                max-width: 100% !important;
            }
            
            /* Layout flex√≠vel para se√ß√µes com imagens */
            div[style*="display: flex"] {
                flex-direction: column !important;
                gap: 1rem !important;
            }
            
            div[style*="flex: 1"], div[style*="flex: 2"] {
                flex: none !important;
                min-width: 100% !important;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Navega√ß√£o -->
        <nav class="navbar">
            <h1>‚ö° Refra√ß√µes da Maya</h1>
            <div class="nav-menu">
                <span class="nav-item active" onclick="showSection('home')">üè† In√≠cio</span>
                <span class="nav-item" onclick="showSection('sheet')">üìã Ficha</span>
                <span class="nav-item" onclick="showSection('abilities')">‚ö° Habilidades</span>
                <span class="nav-item" onclick="showSection('adventures')">üó∫Ô∏è Aventuras</span>
                <span class="nav-item" onclick="showSection('map')">üåç Mapa</span>
                <span class="nav-item" onclick="showSection('npcs')">üë• NPCs</span>
                <span class="nav-item" onclick="showSection('guide')">üìñ Guia</span>
            </div>
        </nav>

        // Indicador de Salvamento -->
        <div id="save-indicator" class="save-indicator">
            ‚úì Salvo automaticamente
        </div>

        <!-- Status de Carregamento -->
        <div id="load-indicator" style="position: fixed; top: 2rem; left: 2rem; background: #3498db; color: white; padding: 1rem 1.5rem; border-radius: 10px; opacity: 0; transition: opacity 0.3s; z-index: 1001;">
            üìÇ Dados carregados com sucesso!
        </div>

        <!-- Aviso de dados n√£o salvos -->
        <div id="unsaved-indicator" style="position: fixed; top: 2rem; left: 50%; transform: translateX(-50%); background: #e74c3c; color: white; padding: 1rem 1.5rem; border-radius: 10px; opacity: 0; transition: opacity 0.3s; z-index: 1002;">
            ‚ö†Ô∏è Dados n√£o salvos! Use o bot√£o Backup
        </div>

        <!-- Controles de Salvamento -->
        <div class="save-controls">
            <button class="save-btn" onclick="exportData()" title="Baixar Backup">
                üì• Backup
            </button>
            <button class="save-btn" onclick="importData()" title="Restaurar Backup">
                üì§ Restaurar
            </button>
            <button class="save-btn danger" onclick="resetData()" title="Limpar Dados">
                üóëÔ∏è Limpar
            </button>
        </div>

        <!-- SE√á√ÉO IN√çCIO -->
        <div id="home" class="content active">
            <div class="hero">
                <h2>Bem-vindos ao Universo da Maya</h2>
                <p>Um guia completo para a ciborgue que questiona os limites entre humanidade e tecnologia</p>
            </div>
            
            <!-- Imagem Principal da Maya -->
            <div class="maya-image-container" style="margin: 3rem 0;">
                <div style="max-width: 400px; margin: 0 auto;">
                    <img src="maya-character-art.jpg" alt="Maya - Arte Conceitual" class="maya-character-image">
                </div>
                <div class="maya-image-caption">
                    Maya em sua forma caracter√≠stica - humanidade e tecnologia em perfeita s√≠ntese
                </div>
            </div>
            
            <div class="guide-section">
                <h2>üéØ Sobre este Site</h2>
                <p>Este √© o manual completo para jogar com Maya, uma ciborgue √∫nica com amn√©sia parcial que busca descobrir seu passado enquanto navega entre sua humanidade e sua natureza tecnol√≥gica.</p>
                
                <div class="stats-display">
                    <div class="stat-display">
                        <div class="stat-display-label">P√°ginas</div>
                        <div class="stat-display-value">40+</div>
                    </div>
                    <div class="stat-display">
                        <div class="stat-display-label">Habilidades</div>
                        <div class="stat-display-value">7</div>
                    </div>
                    <div class="stat-display">
                        <div class="stat-display-label">Aventuras</div>
                        <div class="stat-display-value" style="font-size: 1rem;">Suas Sess√µes</div>
                    </div>
                    <div class="stat-display">
                        <div class="stat-display-label">Regi√µes</div>
                        <div class="stat-display-value">7</div>
                    </div>
                    <div class="stat-display">
                        <div class="stat-display-label">NPCs</div>
                        <div class="stat-display-value">5</div>
                    </div>
                </div>

                <h3>üìö O que voc√™ encontrar√° aqui:</h3>
                <ul>
                    <li><strong>üìã Ficha Edit√°vel:</strong> Complete e personalize Maya com salvamento autom√°tico</li>
                    <li><strong>‚ö° Sistema de Habilidades:</strong> 7 habilidades √∫nicas com descri√ß√µes detalhadas</li>
                    <li><strong>üó∫Ô∏è Sistema de Aventuras:</strong> Documente suas pr√≥prias sess√µes conforme jogam</li>
                    <li><strong>üåç Mapa Interativo:</strong> 7 regi√µes detalhadas com descri√ß√µes personaliz√°veis</li>
                    <li><strong>üë• NPCs Importantes:</strong> Personagens-chave como Skye, Dra. Elena e Orion</li>
                    <li><strong>üé® Conceitos Visuais:</strong> Inspira√ß√µes e descri√ß√µes para dar vida ao personagem</li>
                    <li><strong>üìñ Cronologia Completa:</strong> Hist√≥ria detalhada do universo</li>
                </ul>

                <h3>üó∫Ô∏è Sistema de Aventuras</h3>
                <div class="concept-visual">
                    <div class="concept-title">Documente Suas Sess√µes</div>
                    <div class="concept-description">
                        O site inclui um sistema completo para documentar suas aventuras conforme voc√™ e seus amigos jogam. 
                        Comece do zero e adicione cada sess√£o com resumo, eventos principais, NPCs encontrados, 
                        habilidades usadas e notas do mestre. Crie sua pr√≥pria cronologia de aventuras!
                    </div>
                </div>

                <h4>üìù Campos Dispon√≠veis por Aventura:</h4>
                <ul>
                    <li><strong>Resumo da Sess√£o:</strong> O que aconteceu na aventura</li>
                    <li><strong>Cena de Abertura:</strong> Como tudo come√ßou</li>
                    <li><strong>Principais Eventos:</strong> Combates, descobertas, intera√ß√µes</li>
                    <li><strong>NPCs Encontrados:</strong> Personagens que apareceram</li>
                    <li><strong>Habilidades Usadas:</strong> Quais poderes de Maya se destacaram</li>
                    <li><strong>Recompensas:</strong> O que Maya ganhou ou descobriu</li>
                    <li><strong>Data da Sess√£o:</strong> Quando foi jogada</li>
                    <li><strong>Notas do Mestre:</strong> Observa√ß√µes e ideias para o futuro</li>
                </ul>

                <div class="quote">
                    "Ela n√£o √© apenas m√°quina tentando ser humana, nem humana sendo substitu√≠da por m√°quina. Maya √© algo novo ‚Äî uma s√≠ntese que questiona onde termina a alma e onde come√ßa o c√≥digo."
                </div>
            </div>
        </div>

        <!-- SE√á√ÉO FICHA -->
        <div id="sheet" class="content">
            <div class="character-sheet">
                <div class="sheet-header">
                    <input type="text" class="character-name-input" value="MAYA" placeholder="Nome do Personagem" id="char-name">
                    <input type="text" class="character-class-input" value="Especialista Digital" placeholder="Classe" id="char-class">
                </div>
                
                <div class="sheet-content">
                    <!-- Apar√™ncia Visual de Maya -->
                    <div style="text-align: center; margin: 2rem 0;">
                        <h3 style="color: #2c3e50; margin-bottom: 1rem;">üé≠ Apar√™ncia Visual</h3>
                        <div style="display: flex; gap: 2rem; align-items: flex-start; flex-wrap: wrap;">
                            <div style="flex: 1; min-width: 250px;">
                                <img src="maya-character-art.jpg" alt="Maya - Refer√™ncia Visual" class="maya-character-image" style="max-width: 300px;">
                            </div>
                            <div style="flex: 2; min-width: 300px; text-align: left;">
                                <div class="stat-box">
                                    <div class="stat-label">Descri√ß√£o F√≠sica</div>
                                    <textarea class="stat-input" style="min-height: 120px;" placeholder="Descreva a apar√™ncia de Maya..." id="appearance-desc">Cabelos castanho-escuros na altura dos ombros, olhos expressivos que revelam profundidade emocional mesmo em meio aos implantes cibern√©ticos. Bra√ßos e pernas parcialmente mecanizados com placas met√°licas que se integram organicamente √† pele. Veste roupas pr√°ticas em tons terrosos que permitem mobilidade enquanto disfar√ßam parcialmente suas modifica√ß√µes tecnol√≥gicas.</textarea>
                                </div>
                                <div class="stat-box">
                                    <div class="stat-label">Modifica√ß√µes Vis√≠veis</div>
                                    <textarea class="stat-input" style="min-height: 80px;" placeholder="Implantes e modifica√ß√µes cibern√©ticas..." id="modifications">Bra√ßos com placas de blindagem integradas, joelheiras com sistemas de estabiliza√ß√£o, interface neural sutil no pesco√ßo, olhos com leve brilho digital quando ativa habilidades especiais.</textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="stats-grid">
                        <div class="stat-box">
                            <div class="stat-label">For√ßa</div>
                            <input type="text" class="stat-input" value="10" id="str">
                        </div>
                        <div class="stat-box">
                            <div class="stat-label">Destreza</div>
                            <input type="text" class="stat-input" value="10" id="dex">
                        </div>
                        <div class="stat-box">
                            <div class="stat-label">Constitui√ß√£o</div>
                            <input type="text" class="stat-input" value="10" id="con">
                        </div>
                        <div class="stat-box">
                            <div class="stat-label">Intelig√™ncia</div>
                            <input type="text" class="stat-input" value="10" id="int">
                        </div>
                        <div class="stat-box">
                            <div class="stat-label">Sabedoria</div>
                            <input type="text" class="stat-input" value="10" id="wis">
                        </div>
                        <div class="stat-box">
                            <div class="stat-label">Carisma</div>
                            <input type="text" class="stat-input" value="12" id="cha">
                        </div>
                        <div class="stat-box">
                            <div class="stat-label">HP</div>
                            <input type="text" class="stat-input" value="42" id="hp">
                        </div>
                        <div class="stat-box">
                            <div class="stat-label">Cr√©ditos</div>
                            <input type="text" class="stat-input" value="650" id="credits">
                        </div>
                        <div class="stat-box">
                            <div class="stat-label">Classe</div>
                            <input type="text" class="stat-input" value="Especialista Digital" id="class">
                        </div>
                    </div>
                    
                    <div class="abilities-section">
                        <div class="section-title">‚ö° HABILIDADES ESPECIAIS</div>
                        
                        <!-- Habilidades Defensivas -->
                        <div class="ability-category">
                            <div class="category-header">üõ°Ô∏è HABILIDADES DEFENSIVAS</div>
                            
                            <div class="ability-card">
                                <div class="ability-name">
                                    <input type="text" class="ability-name-input" value="Eco de Si" id="ability1-name">
                                    <span class="ability-type passive">PASSIVA</span>
                                </div>
                                <div class="ability-description">
                                    <textarea placeholder="Descri√ß√£o da habilidade" id="ability1-desc">Lembran√ßa protetora que se mant√©m ativa automaticamente.</textarea>
                                </div>
                                <div class="ability-mechanics">
                                    <textarea placeholder="Mec√¢nicas e efeitos" id="ability1-mech">Efeito: Prote√ß√£o autom√°tica permanente</textarea>
                                </div>
                            </div>
                            
                            <div class="ability-card">
                                <div class="ability-name">
                                    <input type="text" class="ability-name-input" value="V√≠nculo Luminar" id="ability2-name">
                                    <span class="ability-type">DEFENSIVA</span>
                                </div>
                                <div class="ability-description">
                                    <textarea placeholder="Descri√ß√£o da habilidade" id="ability2-desc">Estabelece uma conex√£o que redireciona parte do dano recebido de um aliado para um inimigo.</textarea>
                                </div>
                                <div class="ability-mechanics">
                                    <textarea placeholder="Mec√¢nicas e efeitos" id="ability2-mech">Efeito: Redireciona 50% do dano que um aliado receberia para um inimigo
Teste: 2d6 para estabelecer o redirecionamento</textarea>
                                </div>
                            </div>
                            
                            <div class="ability-card">
                                <div class="ability-name">
                                    <input type="text" class="ability-name-input" value="Eco de Guerra" id="ability3-name">
                                    <span class="ability-type">DEFENSIVA</span>
                                </div>
                                <div class="ability-description">
                                    <textarea placeholder="Descri√ß√£o da habilidade" id="ability3-desc">Ao receber o primeiro golpe do combate, manifesta um clone hologr√°fico defensivo.</textarea>
                                </div>
                                <div class="ability-mechanics">
                                    <textarea placeholder="Mec√¢nicas e efeitos" id="ability3-mech">Efeito: Clone replica a pr√≥xima habilidade utilizada por Maya
Dura√ß√£o: 1 uso, depois desaparece</textarea>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Habilidades Utilit√°rias -->
                        <div class="ability-category">
                            <div class="category-header">üîç HABILIDADES UTILIT√ÅRIAS</div>
                            
                            <div class="ability-card">
                                <div class="ability-name">
                                    <input type="text" class="ability-name-input" value="Pulso de Conex√£o" id="ability4-name">
                                    <span class="ability-type utility">UTILIT√ÅRIA</span>
                                </div>
                                <div class="ability-description">
                                    <textarea placeholder="Descri√ß√£o da habilidade" id="ability4-desc">Emite uma onda de energia que revela equipamentos ocultos e causa interfer√™ncia.</textarea>
                                </div>
                                <div class="ability-mechanics">
                                    <textarea placeholder="Mec√¢nicas e efeitos" id="ability4-mech">Efeito: Revela dispositivos escondidos + 3d4 de dano em √°rea
Teste: 2d6 para acertar</textarea>
                                </div>
                            </div>
                            
                            <div class="ability-card">
                                <div class="ability-name">
                                    <input type="text" class="ability-name-input" value="Sobreposi√ß√£o de Realidade" id="ability5-name">
                                    <span class="ability-type utility">UTILIT√ÅRIA</span>
                                </div>
                                <div class="ability-description">
                                    <textarea placeholder="Descri√ß√£o da habilidade" id="ability5-desc">Faz todos ao redor verem uma mem√≥ria real ou falsa, manipulando a percep√ß√£o da realidade.</textarea>
                                </div>
                                <div class="ability-mechanics">
                                    <textarea placeholder="Mec√¢nicas e efeitos" id="ability5-mech">Efeito: Pode confundir, emocionar ou distrair alvos na √°rea
Teste: + Carisma</textarea>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Habilidades Ofensivas -->
                        <div class="ability-category">
                            <div class="category-header">‚öîÔ∏è HABILIDADES OFENSIVAS</div>
                            
                            <div class="ability-card">
                                <div class="ability-name">
                                    <input type="text" class="ability-name-input" value="Lan√ßa de Dados" id="ability6-name">
                                    <span class="ability-type">OFENSIVA</span>
                                </div>
                                <div class="ability-description">
                                    <textarea placeholder="Descri√ß√£o da habilidade" id="ability6-desc">Condensa dados corrompidos em forma de uma lan√ßa digital e a arremessa com for√ßa extrema, atravessando m√∫ltiplos alvos no caminho.</textarea>
                                </div>
                                <div class="ability-mechanics">
                                    <textarea placeholder="Mec√¢nicas e efeitos" id="ability6-mech">Dano Principal: 3d6 | Teste: 2d6 para acertar
Perfura√ß√£o: Atravessa at√© 2 inimigos alinhados (50% do dano)</textarea>
                                </div>
                                <div class="visual-desc">
                                    <textarea placeholder="Descri√ß√£o visual" id="ability6-visual">Visual: Um feixe afiado de luz e fragmentos digitais, como vidro brilhante quebrando no ar, que rasga o espa√ßo ao avan√ßar.</textarea>
                                </div>
                            </div>
                            
                            <div class="ability-card">
                                <div class="ability-name">
                                    <input type="text" class="ability-name-input" value="Fragmento Explosivo" id="ability7-name">
                                    <span class="ability-type">OFENSIVA</span>
                                </div>
                                <div class="ability-description">
                                    <textarea placeholder="Descri√ß√£o da habilidade" id="ability7-desc">Dispara um fragmento digital inst√°vel que explode ao impacto.</textarea>
                                </div>
                                <div class="ability-mechanics">
                                    <textarea placeholder="Mec√¢nicas e efeitos" id="ability7-mech">Dano Principal: 2d6+1d4 | Teste: 2d6 para acertar
Dano em √Årea: 1d4 em alvos adjacentes</textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="stats-grid">
                        <div class="stat-box">
                            <div class="stat-label">Equipamentos</div>
                            <textarea class="stat-input" style="min-height: 100px;" placeholder="Liste seus equipamentos aqui" id="equipment"></textarea>
                        </div>
                        <div class="stat-box">
                            <div class="stat-label">Notas</div>
                            <textarea class="stat-input" style="min-height: 100px;" placeholder="Anota√ß√µes gerais" id="notes"></textarea>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- SE√á√ÉO HABILIDADES -->
        <div id="abilities" class="content">
            <div class="guide-section">
                <h2>‚ö° Habilidades Especiais Detalhadas</h2>
                
                <div class="info-box">
                    <div class="info-header">üõ°Ô∏è Eco de Si (Passiva)</div>
                    <div class="info-content">
                        <p>Desde o momento em que Maya abriu os olhos pela primeira vez, algo parecia acordado em seu peito ‚Äî uma chama interna que pulsava, quase humana, mesmo em meio √† carca√ßa cibern√©tica. Essa lembran√ßa ancestral se tornava um escudo invis√≠vel nos momentos cr√≠ticos.</p>
                        <p><strong>Efeito:</strong> Prote√ß√£o autom√°tica permanente. Reduz automaticamente parte do impacto de ataques cr√≠ticos e emboscadas.</p>
                    </div>
                </div>

                <div class="info-box">
                    <div class="info-header">üîó V√≠nculo Luminar (Defensiva)</div>
                    <div class="info-content">
                        <p>Quando um aliado querido sofre um golpe que poderia derrub√°-lo, algo desperta no n√∫cleo de Maya. Seu corpo se ilumina em padr√µes sutis, criando um elo que redistribui a viol√™ncia de volta para o agressor.</p>
                        <p><strong>Efeito:</strong> Redireciona 50% do dano que um aliado receberia de volta para o inimigo atacante.</p>
                        <p><strong>Teste:</strong> 2d6 para estabelecer o v√≠nculo protetor.</p>
                    </div>
                </div>

                <div class="info-box">
                    <div class="info-header">üë• Eco de Guerra (Defensiva)</div>
                    <div class="info-content">
                        <p>Ao receber o primeiro golpe de um combate, circuitos adormecidos se ativam. Um clone hologr√°fico de Maya se materializa, observando cada movimento dela e replicando sua pr√≥xima habilidade.</p>
                        <p><strong>Efeito:</strong> Ao receber o primeiro golpe, cria um clone que replica a pr√≥xima habilidade utilizada.</p>
                        <p><strong>Dura√ß√£o:</strong> 1 uso por combate, depois desaparece.</p>
                    </div>
                </div>

                <div class="info-box">
                    <div class="info-header">üì° Pulso de Conex√£o (Utilit√°ria)</div>
                    <div class="info-content">
                        <p>Maya libera ondas de energia que ressoam com dispositivos eletr√¥nicos, revelando equipamentos ocultos enquanto interfere nos sistemas nervosos dos inimigos pr√≥ximos.</p>
                        <p><strong>Efeito:</strong> Revela dispositivos escondidos + 3d4 de dano por interfer√™ncia.</p>
                        <p><strong>Teste:</strong> 2d6 para alcance e precis√£o.</p>
                    </div>
                </div>

                <div class="info-box">
                    <div class="info-header">üß† Sobreposi√ß√£o de Realidade (Utilit√°ria)</div>
                    <div class="info-content">
                        <p>Maya projeta mem√≥rias diretamente na percep√ß√£o de todos ao redor. O ambiente se transforma: todos veem e sentem uma mem√≥ria v√≠vida que pode quebrar concentra√ß√µes ou despertar emo√ß√µes poderosas.</p>
                        <p><strong>Efeito:</strong> Faz todos na √°rea verem uma mem√≥ria (real ou falsa), podendo confundir, emocionar ou distrair.</p>
                        <p><strong>Teste:</strong> Baseado em Carisma + modificadores situacionais.</p>
                    </div>
                </div>

                <div class="info-box">
                    <div class="info-header">üéØ Lan√ßa de Dados (Ofensiva)</div>
                    <div class="info-content">
                        <p>Maya condensa dados corrompidos em uma lan√ßa de energia digital afiada. Ela a arremessa com for√ßa sobre-humana, perfurando o alvo principal e atravessando inimigos alinhados atr√°s dele.</p>
                        <p><strong>Dano Principal:</strong> 3d6 | <strong>Teste:</strong> 2d6 para acertar</p>
                        <p><strong>Perfura√ß√£o:</strong> Atravessa at√© 2 inimigos alinhados (50% do dano)</p>
                        <p><em>Visual: Um feixe afiado de luz e fragmentos digitais, como vidro brilhante quebrando no ar.</em></p>
                    </div>
                </div>

                <div class="info-box">
                    <div class="info-header">üí• Fragmento Explosivo (Ofensiva)</div>
                    <div class="info-content">
                        <p>Maya dispara um n√∫cleo de dados inst√°veis que explode em uma cascata ca√≥tica de luz estrobosc√≥pica, atingindo o alvo principal e desorganizando sistemas pr√≥ximos.</p>
                        <p><strong>Dano Principal:</strong> 2d6+1d4 | <strong>Teste:</strong> 2d6 para acertar</p>
                        <p><strong>Dano em √Årea:</strong> 1d4 em inimigos adjacentes</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- SE√á√ÉO AVENTURAS -->
        <div id="adventures" class="content">
            <div class="guide-section">
                <h2>üó∫Ô∏è Aventuras da Mesa</h2>
                
                <div class="concept-visual">
                    <div class="concept-title">Registro das Sess√µes de S√°bado</div>
                    <div class="concept-description">
                        Documente aqui as aventuras que voc√™ e seus amigos viveram com Maya. 
                        Cada aventura pode ser editada e novas podem ser adicionadas conforme voc√™s jogam.
                    </div>
                </div>

                <!-- Controles de Aventuras -->
                <div style="text-align: center; margin: 2rem 0;">
                    <button class="save-btn" onclick="addNewAdventure()" style="position: relative; margin: 0 1rem;">
                        ‚ûï Adicionar Nova Aventura
                    </button>
                    <button class="save-btn" onclick="toggleAdventureList()" style="position: relative; margin: 0 1rem; background: #f39c12;">
                        üìã Ver Lista de Aventuras
                    </button>
                </div>

                <!-- Lista de Aventuras -->
                <div id="adventure-list" style="display: none; margin: 2rem 0;">
                    <div class="info-box">
                        <div class="info-header">üìã Suas Aventuras</div>
                        <div class="info-content" id="adventure-list-content">
                            <!-- Lista ser√° preenchida dinamicamente -->
                        </div>
                    </div>
                </div>

                <!-- Aventuras Edit√°veis -->
                <div id="adventures-container">
                    <!-- Aventuras ser√£o adicionadas aqui dinamicamente -->
                    <div class="concept-visual" style="margin: 3rem 0;">
                        <div class="concept-title">üìù Suas Aventuras Aparecer√£o Aqui</div>
                        <div class="concept-description">
                            Use o bot√£o "‚ûï Adicionar Nova Aventura" acima para come√ßar a documentar 
                            suas sess√µes de RPG. Cada aventura pode ser completamente personalizada 
                            com todos os detalhes da sua mesa!
                        </div>
                    </div>
                </div>

                <div class="quote">
                    "Cada aventura √© uma nova p√°gina na hist√≥ria de Maya. Comece documentando sua primeira sess√£o e veja como a narrativa da sua mesa evolui ao longo do tempo."
                </div>
            </div>
        </div>

        <!-- SE√á√ÉO MAPA -->
        <div id="map" class="content">
            <div class="guide-section">
                <h2>üåç Geografia do Mundo</h2>
                
                <div class="concept-visual">
                    <div class="concept-title">Mapa das Regi√µes</div>
                    <div class="concept-description">
                        O mundo √© dividido em regi√µes distintas, cada uma com suas pr√≥prias caracter√≠sticas, 
                        perigos e oportunidades. Maya navega entre esses territ√≥rios em busca de respostas sobre seu passado.
                    </div>
                </div>

                <!-- Mapa Visual Interativo -->
                <div class="map-container" style="position: relative; width: 100%; max-width: 800px; margin: 2rem auto; background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%); border-radius: 20px; padding: 3rem; box-shadow: 0 15px 40px rgba(0,0,0,0.4); overflow: hidden;">
                    
                    <!-- Efeito de fundo -->
                    <div style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: radial-gradient(circle at 30% 70%, rgba(52, 152, 219, 0.1) 0%, transparent 50%), radial-gradient(circle at 70% 30%, rgba(155, 89, 182, 0.1) 0%, transparent 50%); pointer-events: none;"></div>
                    
                    <!-- SVG do Mapa -->
                    <svg viewBox="0 0 400 300" style="width: 100%; height: auto; min-height: 300px;">
                        <!-- Conex√µes/Rotas -->
                        <g stroke="rgba(52, 152, 219, 0.3)" stroke-width="2" stroke-dasharray="5,5" fill="none">
                            <!-- Conex√µes para o centro -->
                            <line x1="200" y1="150" x2="200" y2="50"/>
                            <line x1="200" y1="150" x2="80" y2="80"/>
                            <line x1="200" y1="150" x2="320" y2="70"/>
                            <line x1="200" y1="150" x2="60" y2="180"/>
                            <line x1="200" y1="150" x2="200" y2="230"/>
                            <line x1="200" y1="150" x2="340" y2="190"/>
                        </g>
                        
                        <!-- Regi√µes/Cidades -->
                        
                        <!-- Centro Imperial -->
                        <g onclick="toggleCityEdit('imperial')" style="cursor: pointer;" class="city-node" title="Centro Imperial - Hub central altamente monitorado">
                            <circle cx="200" cy="150" r="35" fill="url(#gradientImperial)" stroke="rgba(231, 76, 60, 0.8)" stroke-width="3"/>
                            <circle cx="200" cy="150" r="25" fill="rgba(231, 76, 60, 0.2)"/>
                            <text x="200" y="148" text-anchor="middle" fill="white" font-size="12" font-weight="bold">‚öôÔ∏è</text>
                            <text x="200" y="162" text-anchor="middle" fill="white" font-size="9" font-weight="bold">CENTRO</text>
                            <text x="200" y="173" text-anchor="middle" fill="white" font-size="9" font-weight="bold">IMPERIAL</text>
                        </g>
                        
                        <!-- Uluth (Norte) -->
                        <g onclick="toggleCityEdit('uluth')" style="cursor: pointer;" class="city-node" title="Uluth - Regi√£o fria com poss√≠veis laborat√≥rios antigos">
                            <circle cx="200" cy="50" r="28" fill="url(#gradientUluth)" stroke="rgba(155, 89, 182, 0.8)" stroke-width="2"/>
                            <text x="200" y="48" text-anchor="middle" fill="white" font-size="14" font-weight="bold">‚ùÑÔ∏è</text>
                            <text x="200" y="62" text-anchor="middle" fill="white" font-size="8" font-weight="bold">ULUTH</text>
                        </g>
                        
                        <!-- Winter (Noroeste) -->
                        <g onclick="toggleCityEdit('winter')" style="cursor: pointer;" class="city-node" title="Winter - Zona neutra coberta de neve">
                            <circle cx="80" cy="80" r="25" fill="url(#gradientWinter)" stroke="rgba(52, 152, 219, 0.8)" stroke-width="2"/>
                            <text x="80" y="78" text-anchor="middle" fill="white" font-size="12" font-weight="bold">üå®Ô∏è</text>
                            <text x="80" y="92" text-anchor="middle" fill="white" font-size="8" font-weight="bold">WINTER</text>
                        </g>
                        
                        <!-- Morred Geuo (Nordeste) -->
                        <g onclick="toggleCityEdit('morred')" style="cursor: pointer;" class="city-node" title="Morred Geuo Automatco - Metr√≥pole tecnol√≥gica automatizada">
                            <rect x="290" y="45" width="60" height="50" rx="8" fill="url(#gradientMorred)" stroke="rgba(243, 156, 18, 0.8)" stroke-width="2"/>
                            <text x="320" y="63" text-anchor="middle" fill="white" font-size="11" font-weight="bold">ü§ñ</text>
                            <text x="320" y="75" text-anchor="middle" fill="white" font-size="7" font-weight="bold">MORRED GEUO</text>
                            <text x="320" y="85" text-anchor="middle" fill="white" font-size="7" font-weight="bold">AUTOMATCO</text>
                        </g>
                        
                        <!-- Anaz (Oeste) -->
                        <g onclick="toggleCityEdit('anaz')" style="cursor: pointer;" class="city-node" title="Anaz - Ru√≠nas antigas com artefatos perdidos">
                            <circle cx="60" cy="180" r="25" fill="url(#gradientAnaz)" stroke="rgba(149, 165, 166, 0.8)" stroke-width="2"/>
                            <text x="60" y="178" text-anchor="middle" fill="white" font-size="12" font-weight="bold">üèõÔ∏è</text>
                            <text x="60" y="192" text-anchor="middle" fill="white" font-size="8" font-weight="bold">ANAZ</text>
                        </g>
                        
                        <!-- Lonisivinuss (Sul) - Localiza√ß√£o de Maya -->
                        <g onclick="toggleCityEdit('lonisivinuss')" style="cursor: pointer;" class="city-node maya-location" title="Lonisivinuss - Regi√£o aqu√°tica onde Maya vive atualmente">
                            <circle cx="200" cy="230" r="35" fill="url(#gradientLonisivinuss)" stroke="rgba(26, 188, 156, 0.8)" stroke-width="3"/>
                            <circle cx="200" cy="230" r="25" fill="rgba(26, 188, 156, 0.2)"/>
                            <circle cx="200" cy="230" r="40" fill="none" stroke="rgba(241, 196, 15, 0.4)" stroke-width="2" stroke-dasharray="3,3">
                                <animate attributeName="r" values="40;45;40" dur="3s" repeatCount="indefinite"/>
                                <animate attributeName="stroke-opacity" values="0.4;0.8;0.4" dur="3s" repeatCount="indefinite"/>
                            </circle>
                            <text x="200" y="225" text-anchor="middle" fill="white" font-size="12" font-weight="bold">üåä</text>
                            <text x="200" y="237" text-anchor="middle" fill="white" font-size="8" font-weight="bold">LONISIVINUSS</text>
                            <text x="200" y="248" text-anchor="middle" fill="#f1c40f" font-size="7" font-weight="bold">üìç MAYA</text>
                        </g>
                        
                        <!-- Karas (Leste) -->
                        <g onclick="toggleCityEdit('karas')" style="cursor: pointer;" class="city-node" title="Karas - Territ√≥rio militar altamente perigoso">
                            <circle cx="340" cy="190" r="25" fill="url(#gradientKaras)" stroke="rgba(231, 76, 60, 0.8)" stroke-width="2"/>
                            <text x="340" y="188" text-anchor="middle" fill="white" font-size="12" font-weight="bold">‚öîÔ∏è</text>
                            <text x="340" y="202" text-anchor="middle" fill="white" font-size="8" font-weight="bold">KARAS</text>
                        </g>
                        
                        <!-- Gradientes -->
                        <defs>
                            <radialGradient id="gradientImperial" cx="50%" cy="50%" r="50%">
                                <stop offset="0%" style="stop-color:#e74c3c;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#c0392b;stop-opacity:1" />
                            </radialGradient>
                            <radialGradient id="gradientUluth" cx="50%" cy="50%" r="50%">
                                <stop offset="0%" style="stop-color:#9b59b6;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#8e44ad;stop-opacity:1" />
                            </radialGradient>
                            <radialGradient id="gradientWinter" cx="50%" cy="50%" r="50%">
                                <stop offset="0%" style="stop-color:#3498db;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#2980b9;stop-opacity:1" />
                            </radialGradient>
                            <radialGradient id="gradientMorred" cx="50%" cy="50%" r="50%">
                                <stop offset="0%" style="stop-color:#f39c12;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#e67e22;stop-opacity:1" />
                            </radialGradient>
                            <radialGradient id="gradientAnaz" cx="50%" cy="50%" r="50%">
                                <stop offset="0%" style="stop-color:#95a5a6;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#7f8c8d;stop-opacity:1" />
                            </radialGradient>
                            <radialGradient id="gradientLonisivinuss" cx="50%" cy="50%" r="50%">
                                <stop offset="0%" style="stop-color:#1abc9c;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#16a085;stop-opacity:1" />
                            </radialGradient>
                            <radialGradient id="gradientKaras" cx="50%" cy="50%" r="50%">
                                <stop offset="0%" style="stop-color:#e74c3c;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#c0392b;stop-opacity:1" />
                            </radialGradient>
                        </defs>
                    </svg>
                    
                    <!-- Legenda Melhorada -->
                    <div style="margin-top: 2rem; display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                        <div style="background: rgba(52, 152, 219, 0.1); border: 1px solid rgba(52, 152, 219, 0.3); border-radius: 10px; padding: 1rem; color: #ecf0f1; text-align: center;">
                            <div style="font-weight: bold; margin-bottom: 0.5rem; color: #3498db;">üí° Controles</div>
                            <div style="font-size: 0.9rem;">Clique nas regi√µes para editar</div>
                        </div>
                        <div style="background: rgba(46, 204, 113, 0.1); border: 1px solid rgba(46, 204, 113, 0.3); border-radius: 10px; padding: 1rem; color: #ecf0f1; text-align: center;">
                            <div style="font-weight: bold; margin-bottom: 0.5rem; color: #2ecc71;">üéØ Localiza√ß√£o</div>
                            <div style="font-size: 0.9rem;">Maya est√° em Lonisivinuss</div>
                        </div>
                    </div>
                    
                    <!-- Rotas Principais -->
                    <div style="margin-top: 1.5rem;">
                        <div style="text-align: center; color: #ecf0f1; font-weight: bold; margin-bottom: 1rem; font-size: 1rem;">üõ£Ô∏è Principais Rotas de Viagem</div>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
                            <div style="background: rgba(52, 152, 219, 0.1); border: 1px solid rgba(52, 152, 219, 0.3); border-radius: 8px; padding: 0.8rem; color: #ecf0f1; font-size: 0.8rem;">
                                <strong>üõ£Ô∏è Rota Norte:</strong> Uluth ‚Üî Winter (baixa vigil√¢ncia)
                            </div>
                            <div style="background: rgba(243, 156, 18, 0.1); border: 1px solid rgba(243, 156, 18, 0.3); border-radius: 8px; padding: 0.8rem; color: #ecf0f1; font-size: 0.8rem;">
                                <strong>üîß Rota Tech:</strong> Morred ‚Üî Centro (alta tecnologia)
                            </div>
                            <div style="background: rgba(26, 188, 156, 0.1); border: 1px solid rgba(26, 188, 156, 0.3); border-radius: 8px; padding: 0.8rem; color: #ecf0f1; font-size: 0.8rem;">
                                <strong>üåä Rota Aqu√°tica:</strong> Lonisivinuss ‚Üî Anaz (comunica√ß√µes secretas)
                            </div>
                            <div style="background: rgba(231, 76, 60, 0.1); border: 1px solid rgba(231, 76, 60, 0.3); border-radius: 8px; padding: 0.8rem; color: #ecf0f1; font-size: 0.8rem;">
                                <strong>‚öîÔ∏è Rota Militar:</strong> Karas ‚Üî Centro (patrulhamento)
                            </div>
                        </div>
                    </div>
                    
                    <!-- Indicadores de N√≠vel de Perigo -->
                    <div style="position: absolute; top: 1rem; right: 1rem; background: rgba(44, 62, 80, 0.9); border-radius: 10px; padding: 1rem; min-width: 120px;">
                        <div style="color: #ecf0f1; font-weight: bold; margin-bottom: 0.5rem; text-align: center; font-size: 0.9rem;">‚ö†Ô∏è N√≠veis de Perigo</div>
                        <div style="display: flex; flex-direction: column; gap: 0.3rem; font-size: 0.8rem;">
                            <div style="display: flex; justify-content: space-between;"><span style="color: #27ae60;">‚óè</span> <span style="color: #ecf0f1;">Baixo</span></div>
                            <div style="display: flex; justify-content: space-between;"><span style="color: #f39c12;">‚óè</span> <span style="color: #ecf0f1;">M√©dio</span></div>
                            <div style="display: flex; justify-content: space-between;"><span style="color: #e74c3c;">‚óè</span> <span style="color: #ecf0f1;">Alto</span></div>
                            <div style="display: flex; justify-content: space-between;"><span style="color: #8e44ad;">‚óè</span> <span style="color: #ecf0f1;">Extremo</span></div>
                        </div>
                    </div>
                </div>

                <!-- Descri√ß√µes Edit√°veis das Cidades -->
                <div id="city-descriptions" style="margin-top: 6rem;">
                    
                    <!-- Indicador de Regi√£o Ativa -->
                    <div id="active-region-indicator" style="display: none; text-align: center; margin-bottom: 2rem;">
                        <div style="background: linear-gradient(90deg, #f39c12, #e67e22); color: white; padding: 1rem 2rem; border-radius: 25px; display: inline-block; font-weight: bold; font-size: 1.1rem; box-shadow: 0 5px 15px rgba(243, 156, 18, 0.3);">
                            ‚úèÔ∏è Editando: <span id="active-region-name"></span>
                        </div>
                    </div>
                    
                    <div id="city-uluth" class="city-edit-section" style="display: none;">
                        <div class="info-box">
                            <div class="info-header">‚ùÑÔ∏è ULUTH</div>
                            <div class="info-content">
                                <div style="margin-bottom: 1rem;">
                                    <label style="font-weight: bold; display: block; margin-bottom: 0.5rem;">Tipo:</label>
                                    <input type="text" class="stat-input" placeholder="Ex: Territ√≥rio do Norte" id="uluth-type" value="Territ√≥rio do Norte">
                                </div>
                                <div style="margin-bottom: 1rem;">
                                    <label style="font-weight: bold; display: block; margin-bottom: 0.5rem;">Caracter√≠sticas:</label>
                                    <textarea class="stat-input" style="min-height: 60px;" placeholder="Descreva as caracter√≠sticas da regi√£o" id="uluth-characteristics">Regi√£o fria e montanhosa</textarea>
                                </div>
                                <div style="margin-bottom: 1rem;">
                                    <label style="font-weight: bold; display: block; margin-bottom: 0.5rem;">Popula√ß√£o:</label>
                                    <textarea class="stat-input" style="min-height: 60px;" placeholder="Quem vive aqui?" id="uluth-population">Comunidades isoladas, especialistas em tecnologia de sobreviv√™ncia</textarea>
                                </div>
                                <div style="margin-bottom: 1rem;">
                                    <label style="font-weight: bold; display: block; margin-bottom: 0.5rem;">Relev√¢ncia para Maya:</label>
                                    <textarea class="stat-input" style="min-height: 60px;" placeholder="Por que √© importante?" id="uluth-relevance">Poss√≠vel localiza√ß√£o de laborat√≥rios antigos</textarea>
                                </div>
                                <div style="margin-bottom: 1rem;">
                                    <label style="font-weight: bold; display: block; margin-bottom: 0.5rem;">Perigos:</label>
                                    <textarea class="stat-input" style="min-height: 60px;" placeholder="Quais s√£o os riscos?" id="uluth-dangers">Clima extremo, sistemas automatizados hostis</textarea>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="city-winter" class="city-edit-section" style="display: none;">
                        <div class="info-box">
                            <div class="info-header">üå®Ô∏è WINTER</div>
                            <div class="info-content">
                                <div style="margin-bottom: 1rem;">
                                    <label style="font-weight: bold; display: block; margin-bottom: 0.5rem;">Tipo:</label>
                                    <input type="text" class="stat-input" placeholder="Ex: Regi√£o Ocidental" id="winter-type" value="Regi√£o Ocidental">
                                </div>
                                <div style="margin-bottom: 1rem;">
                                    <label style="font-weight: bold; display: block; margin-bottom: 0.5rem;">Caracter√≠sticas:</label>
                                    <textarea class="stat-input" style="min-height: 60px;" placeholder="Descreva as caracter√≠sticas da regi√£o" id="winter-characteristics">Eternamente coberta por neve</textarea>
                                </div>
                                <div style="margin-bottom: 1rem;">
                                    <label style="font-weight: bold; display: block; margin-bottom: 0.5rem;">Popula√ß√£o:</label>
                                    <textarea class="stat-input" style="min-height: 60px;" placeholder="Quem vive aqui?" id="winter-population">N√¥mades resistentes, comerciantes de sucata</textarea>
                                </div>
                                <div style="margin-bottom: 1rem;">
                                    <label style="font-weight: bold; display: block; margin-bottom: 0.5rem;">Recursos:</label>
                                    <textarea class="stat-input" style="min-height: 60px;" placeholder="O que se encontra aqui?" id="winter-resources">Metais raros e componentes cibern√©ticos</textarea>
                                </div>
                                <div style="margin-bottom: 1rem;">
                                    <label style="font-weight: bold; display: block; margin-bottom: 0.5rem;">Status:</label>
                                    <textarea class="stat-input" style="min-height: 60px;" placeholder="Situa√ß√£o pol√≠tica/militar" id="winter-status">Zona neutra para encontros secretos</textarea>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="city-morred" class="city-edit-section" style="display: none;">
                        <div class="info-box">
                            <div class="info-header">ü§ñ MORRED GEUO AUTOMATCO</div>
                            <div class="info-content">
                                <div style="margin-bottom: 1rem;">
                                    <label style="font-weight: bold; display: block; margin-bottom: 0.5rem;">Tipo:</label>
                                    <input type="text" class="stat-input" placeholder="Ex: Metr√≥pole Tecnol√≥gica" id="morred-type" value="Metr√≥pole Tecnol√≥gica">
                                </div>
                                <div style="margin-bottom: 1rem;">
                                    <label style="font-weight: bold; display: block; margin-bottom: 0.5rem;">Caracter√≠sticas:</label>
                                    <textarea class="stat-input" style="min-height: 60px;" placeholder="Descreva as caracter√≠sticas da regi√£o" id="morred-characteristics">Cidade completamente automatizada</textarea>
                                </div>
                                <div style="margin-bottom: 1rem;">
                                    <label style="font-weight: bold; display: block; margin-bottom: 0.5rem;">Popula√ß√£o:</label>
                                    <textarea class="stat-input" style="min-height: 60px;" placeholder="Quem vive aqui?" id="morred-population">Ciborgues avan√ßados, IAs habitantes</textarea>
                                </div>
                                <div style="margin-bottom: 1rem;">
                                    <label style="font-weight: bold; display: block; margin-bottom: 0.5rem;">Perigo para Maya:</label>
                                    <textarea class="stat-input" style="min-height: 60px;" placeholder="Riscos espec√≠ficos para Maya" id="morred-danger">Alto risco de detec√ß√£o para Maya</textarea>
                                </div>
                                <div style="margin-bottom: 1rem;">
                                    <label style="font-weight: bold; display: block; margin-bottom: 0.5rem;">Interesse:</label>
                                    <textarea class="stat-input" style="min-height: 60px;" placeholder="Por que √© interessante?" id="morred-interest">Poss√≠vel local onde Skye opera</textarea>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="city-anaz" class="city-edit-section" style="display: none;">
                        <div class="info-box">
                            <div class="info-header">üèõÔ∏è ANAZ</div>
                            <div class="info-content">
                                <div style="margin-bottom: 1rem;">
                                    <label style="font-weight: bold; display: block; margin-bottom: 0.5rem;">Tipo:</label>
                                    <input type="text" class="stat-input" placeholder="Ex: Ru√≠nas Antigas" id="anaz-type" value="Ru√≠nas Antigas">
                                </div>
                                <div style="margin-bottom: 1rem;">
                                    <label style="font-weight: bold; display: block; margin-bottom: 0.5rem;">Caracter√≠sticas:</label>
                                    <textarea class="stat-input" style="min-height: 60px;" placeholder="Descreva as caracter√≠sticas da regi√£o" id="anaz-characteristics">Vest√≠gios de uma civiliza√ß√£o perdida</textarea>
                                </div>
                                <div style="margin-bottom: 1rem;">
                                    <label style="font-weight: bold; display: block; margin-bottom: 0.5rem;">Popula√ß√£o:</label>
                                    <textarea class="stat-input" style="min-height: 60px;" placeholder="Quem vive aqui?" id="anaz-population">Arque√≥logos, ca√ßadores de tesouros, eremitas</textarea>
                                </div>
                                <div style="margin-bottom: 1rem;">
                                    <label style="font-weight: bold; display: block; margin-bottom: 0.5rem;">Artefatos:</label>
                                    <textarea class="stat-input" style="min-height: 60px;" placeholder="O que pode ser encontrado?" id="anaz-artifacts">Tecnologia antiga, fragmentos de mem√≥ria, dispositivos √∫nicos</textarea>
                                </div>
                                <div style="margin-bottom: 1rem;">
                                    <label style="font-weight: bold; display: block; margin-bottom: 0.5rem;">Mist√©rios:</label>
                                    <textarea class="stat-input" style="min-height: 60px;" placeholder="Segredos da regi√£o" id="anaz-mysteries">Conex√£o com a origem dos ciborgues</textarea>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="city-lonisivinuss" class="city-edit-section" style="display: none;">
                        <div class="info-box">
                            <div class="info-header">üåä LONISIVINUSS - Base de Maya</div>
                            <div class="info-content">
                                <div style="margin-bottom: 1rem;">
                                    <label style="font-weight: bold; display: block; margin-bottom: 0.5rem;">Tipo:</label>
                                    <input type="text" class="stat-input" placeholder="Ex: Regi√£o Aqu√°tica" id="lonisivinuss-type" value="Regi√£o Aqu√°tica">
                                </div>
                                <div style="margin-bottom: 1rem;">
                                    <label style="font-weight: bold; display: block; margin-bottom: 0.5rem;">Caracter√≠sticas:</label>
                                    <textarea class="stat-input" style="min-height: 60px;" placeholder="Descreva as caracter√≠sticas da regi√£o" id="lonisivinuss-characteristics">Cidades flutuantes conectadas por canais</textarea>
                                </div>
                                <div style="margin-bottom: 1rem;">
                                    <label style="font-weight: bold; display: block; margin-bottom: 0.5rem;">Popula√ß√£o:</label>
                                    <textarea class="stat-input" style="min-height: 60px;" placeholder="Quem vive aqui?" id="lonisivinuss-population">Pescadores, contrabandistas, refugiados</textarea>
                                </div>
                                <div style="margin-bottom: 1rem;">
                                    <label style="font-weight: bold; display: block; margin-bottom: 0.5rem;">Por que Maya escolheu aqui:</label>
                                    <textarea class="stat-input" style="min-height: 60px;" placeholder="Por que √© a base de Maya?" id="lonisivinuss-maya">Baixa vigil√¢ncia imperial, f√°cil de se esconder</textarea>
                                </div>
                                <div style="margin-bottom: 1rem;">
                                    <label style="font-weight: bold; display: block; margin-bottom: 0.5rem;">Recursos √∫nicos:</label>
                                    <textarea class="stat-input" style="min-height: 60px;" placeholder="O que h√° de especial?" id="lonisivinuss-resources">Comunica√ß√µes submarinas, rotas de escape</textarea>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="city-karas" class="city-edit-section" style="display: none;">
                        <div class="info-box">
                            <div class="info-header">‚öîÔ∏è KARAS</div>
                            <div class="info-content">
                                <div style="margin-bottom: 1rem;">
                                    <label style="font-weight: bold; display: block; margin-bottom: 0.5rem;">Tipo:</label>
                                    <input type="text" class="stat-input" placeholder="Ex: Zona Militar" id="karas-type" value="Zona Militar">
                                </div>
                                <div style="margin-bottom: 1rem;">
                                    <label style="font-weight: bold; display: block; margin-bottom: 0.5rem;">Caracter√≠sticas:</label>
                                    <textarea class="stat-input" style="min-height: 60px;" placeholder="Descreva as caracter√≠sticas da regi√£o" id="karas-characteristics">Bases militares fortificadas, campos de treinamento</textarea>
                                </div>
                                <div style="margin-bottom: 1rem;">
                                    <label style="font-weight: bold; display: block; margin-bottom: 0.5rem;">Popula√ß√£o:</label>
                                    <textarea class="stat-input" style="min-height: 60px;" placeholder="Quem vive aqui?" id="karas-population">Soldados, mercen√°rios, fabricantes de armas</textarea>
                                </div>
                                <div style="margin-bottom: 1rem;">
                                    <label style="font-weight: bold; display: block; margin-bottom: 0.5rem;">N√≠vel de Perigo:</label>
                                    <textarea class="stat-input" style="min-height: 60px;" placeholder="Qu√£o perigoso √©?" id="karas-danger">Extremamente alto - patrulhas constantes</textarea>
                                </div>
                                <div style="margin-bottom: 1rem;">
                                    <label style="font-weight: bold; display: block; margin-bottom: 0.5rem;">Interesse para Maya:</label>
                                    <textarea class="stat-input" style="min-height: 60px;" placeholder="Por que pode ser relevante?" id="karas-interest">Poss√≠vel local de testes de ciborgues militares</textarea>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="city-imperial" class="city-edit-section" style="display: none;">
                        <div class="info-box">
                            <div class="info-header">‚öôÔ∏è CENTRO IMPERIAL</div>
                            <div class="info-content">
                                <div style="margin-bottom: 1rem;">
                                    <label style="font-weight: bold; display: block; margin-bottom: 0.5rem;">Tipo:</label>
                                    <input type="text" class="stat-input" placeholder="Ex: Capital Imperial" id="imperial-type" value="Capital Imperial">
                                </div>
                                <div style="margin-bottom: 1rem;">
                                    <label style="font-weight: bold; display: block; margin-bottom: 0.5rem;">Caracter√≠sticas:</label>
                                    <textarea class="stat-input" style="min-height: 60px;" placeholder="Descreva as caracter√≠sticas da regi√£o" id="imperial-characteristics">Mega-estrutura de arranha-c√©us, centro de comando</textarea>
                                </div>
                                <div style="margin-bottom: 1rem;">
                                    <label style="font-weight: bold; display: block; margin-bottom: 0.5rem;">Popula√ß√£o:</label>
                                    <textarea class="stat-input" style="min-height: 60px;" placeholder="Quem vive aqui?" id="imperial-population">Elite governante, burocratas, agentes imperiais</textarea>
                                </div>
                                <div style="margin-bottom: 1rem;">
                                    <label style="font-weight: bold; display: block; margin-bottom: 0.5rem;">Vigil√¢ncia:</label>
                                    <textarea class="stat-input" style="min-height: 60px;" placeholder="N√≠vel de monitoramento" id="imperial-surveillance">Vigil√¢ncia total - scanners em todos os locais</textarea>
                                </div>
                                <div style="margin-bottom: 1rem;">
                                    <label style="font-weight: bold; display: block; margin-bottom: 0.5rem;">Perigo para Maya:</label>
                                    <textarea class="stat-input" style="min-height: 60px;" placeholder="Riscos espec√≠ficos" id="imperial-maya-danger">Descoberta instant√¢nea = captura garantida</textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="quote">
                    "O mundo √© vasto e cheio de mist√©rios. Cada regi√£o guarda segredos que podem revelar mais sobre o passado de Maya e o futuro que a aguarda."
                </div>
            </div>
        </div>

        <!-- SE√á√ÉO NPCs -->
        <div id="npcs" class="content">
            <div class="guide-section">
                <h2>üë• Personagens Importantes</h2>
                
                <div class="concept-visual">
                    <div class="concept-title">A Rede de Conex√µes de Maya</div>
                    <div class="concept-description">
                        Ao longo de sua jornada, Maya encontra personagens que moldam sua compreens√£o 
                        do mundo e de si mesma. Alguns s√£o aliados, outros inimigos, e muitos permanecem um mist√©rio.
                    </div>
                </div>

                <!-- Perfil Visual de Maya -->
                <div class="info-box">
                    <div class="info-header">‚ö° MAYA - A Protagonista</div>
                    <div class="info-content">
                        <div style="display: flex; gap: 2rem; align-items: flex-start; flex-wrap: wrap;">
                            <div style="flex: 1; min-width: 200px; text-align: center;">
                                <img src="maya-character-art.jpg" alt="Maya - Protagonista" class="maya-character-image" style="max-width: 250px;">
                                <div class="maya-image-caption">
                                    A ciborgue que questiona sua pr√≥pria humanidade
                                </div>
                            </div>
                            <div style="flex: 2; min-width: 300px;">
                                <p><strong>Identidade:</strong> Ciborgue de origem desconhecida com amn√©sia seletiva sobre seu passado</p>
                                
                                <p><strong>Apar√™ncia:</strong> Jovem mulher com implantes cibern√©ticos vis√≠veis nos bra√ßos e pernas, cabelos castanhos e olhos que brilham sutilmente quando usa suas habilidades especiais</p>
                                
                                <p><strong>Personalidade:</strong> Introspectiva mas determinada, busca equilibrar sua humanidade com suas capacidades tecnol√≥gicas. Possui forte senso de prote√ß√£o aos vulner√°veis</p>
                                
                                <p><strong>Localiza√ß√£o Atual:</strong> Lonisivinuss - onde vive escondida entre as comunidades aqu√°ticas</p>
                                
                                <p><strong>Objetivo Principal:</strong> Descobrir a verdade sobre sua cria√ß√£o e encontrar seu lugar entre humanos e m√°quinas</p>
                                
                                <p><strong>Relacionamentos:</strong> Mant√©m dist√¢ncia por seguran√ßa, mas forma v√≠nculos profundos com aqueles em quem confia</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="info-box">
                    <div class="info-header">üåü SKYE - A Companheira Perdida</div>
                    <div class="info-content">
                        <p><strong>Papel:</strong> Companheira do passado, especialista em redes neurais do "mundo acima"</p>
                        
                        <p><strong>Status:</strong> Ativa no mundo de superf√≠cie, mas impedida de descer ao submundo onde Maya vive</p>
                        
                        <p><strong>Personalidade:</strong> Persistente, inteligente, carrega uma culpa profunda por n√£o conseguir salvar Maya quando tudo desmoronou</p>
                        
                        <p><strong>Hist√≥ria:</strong> Trabalhava no mesmo Projeto Prometeu que Maya, mas estava em miss√£o externa quando tudo desmoronou. Sobreviveu ao colapso do projeto e desde ent√£o busca uma forma de reencontrar Maya.</p>
                        
                        <p><strong>Dilema Central:</strong> Sabe que Maya est√° viva no submundo, mas √© procurada pelas mesmas for√ßas que destru√≠ram o projeto. Cada tentativa de fazer contato coloca ambas em risco.</p>
                        
                        <p><strong>Impedimento:</strong> Cada tentativa de descida resulta em ataques de seguran√ßa coordenados - algu√©m ou algo monitora seus movimentos</p>
                        
                        <p><strong>Recursos:</strong> Monitora Maya √† dist√¢ncia atrav√©s de sinais fragmentados, envia pistas sutis quando poss√≠vel sem comprometer a localiza√ß√£o</p>
                        
                        <p><strong>Localiza√ß√£o:</strong> N√¥made nos n√≠veis superiores, sempre em movimento para evitar captura</p>
                        
                        <p><strong>Segredo:</strong> Possui coordenadas de um local seguro onde ambas podem se encontrar, mas precisa ter certeza de que √© seguro antes de revelar</p>
                        
                        <p><strong>Conflito Interno:</strong> Quer desesperadamente proteger Maya, mas sua aus√™ncia tamb√©m pode ser vista como abandono. Luta entre aproxima√ß√£o e prote√ß√£o √† dist√¢ncia.</p>
                        
                        <div style="background: #f8f9fa; padding: 1rem; border-left: 4px solid #3498db; margin-top: 1rem; border-radius: 5px;">
                            <p><em><strong>Nota Dram√°tica:</strong> Skye representa o passado que Maya perdeu e o futuro que podem construir juntas, se conseguirem superar as for√ßas que as separam.</em></p>
                        </div>
                    </div>
                </div>

                <div class="info-box">
                    <div class="info-header">üî¨ DRA. ELENA VASQUEZ - A Criadora Perdida</div>
                    <div class="info-content">
                        <p><strong>Descri√ß√£o:</strong> A cientista respons√°vel pelo "Projeto Prometeu" que criou Maya. Desapareceu misteriosamente antes que Maya despertasse, deixando apenas registros fragmentados e mensagens codificadas.</p>
                        
                        <p><strong>Apar√™ncia:</strong> Conhecida apenas atrav√©s de hologramas e fotografias antigas. Mulher de meia-idade com olhos gentis mas determinados, sempre usando um jaleco branco caracter√≠stico.</p>
                        
                        <p><strong>Legado:</strong> Seus laborat√≥rios espalhados pelo mundo cont√™m pistas sobre o passado de Maya e possivelmente a chave para sua evolu√ß√£o futura.</p>
                        
                        <p><strong>Mist√©rio:</strong> Ela est√° viva? Por que desapareceu? E por que deixou Maya sozinha para descobrir sua pr√≥pria identidade?</p>
                        
                        <p><strong>Relacionamento com Maya:</strong> Figura materna ausente. Maya sente uma conex√£o profunda com a dra. Elena, mesmo nunca tendo a conhecido conscientemente.</p>
                    </div>
                </div>

                <div class="info-box">
                    <div class="info-header">‚öîÔ∏è COMANDANTE ORION - O Ca√ßador Implac√°vel</div>
                    <div class="info-content">
                        <p><strong>Descri√ß√£o:</strong> Oficial militar de elite especializado em ca√ßar ciborgues renegados. Orion v√™ Maya como uma amea√ßa que deve ser neutralizada, mas sua obsess√£o parece ter ra√≠zes mais profundas.</p>
                        
                        <p><strong>Apar√™ncia:</strong> Homem alto e imponente, com cicatrizes que contam hist√≥rias de batalhas contra m√°quinas. Sempre veste o uniforme militar impec√°vel, com ins√≠gnias que indicam in√∫meras vit√≥rias.</p>
                        
                        <p><strong>Personalidade:</strong> Disciplinado e met√≥dico, mas h√° um toque de fanatismo em sua cruzada contra ciborgues "descontrolados".</p>
                        
                        <p><strong>Mist√©rio:</strong> Por que Orion conhece tanto sobre Maya? H√° algo pessoal em sua persegui√ß√£o ou √© apenas dever militar?</p>
                        
                        <p><strong>Relacionamento com Maya:</strong> Antagonista principal. Representa a amea√ßa constante de captura e o medo de Maya de ser descoberta.</p>
                    </div>
                </div>

                <div class="info-box">
                    <div class="info-header">üé≠ ECHO - O Informante Enigm√°tico</div>
                    <div class="info-content">
                        <p><strong>Descri√ß√£o:</strong> Uma presen√ßa misteriosa que se comunica com Maya atrav√©s de canais digitais criptografados. Echo sempre sabe mais do que deveria sobre os movimentos de Maya.</p>
                        
                        <p><strong>Identidade:</strong> Desconhecida. Pode ser uma IA avan√ßada, outro ciborgue, ou at√© mesmo um humano com acesso a tecnologia impressionante.</p>
                        
                        <p><strong>M√©todo:</strong> Aparece como voz distorcida, texto criptografado, ou hologramas tremulantes. Nunca revela sua forma verdadeira.</p>
                        
                        <p><strong>Motiva√ß√£o:</strong> Parece genuinamente interessado em ajudar Maya, mas seus pr√≥prios objetivos permanecem obscuros.</p>
                        
                        <p><strong>Relacionamento com Maya:</strong> Aliado misterioso. Maya confia nele por necessidade, mas sempre se pergunta quais s√£o suas verdadeiras inten√ß√µes.</p>
                    </div>
                </div>

                <div class="info-box">
                    <div class="info-header">üåä MARINA - A Aliada Local</div>
                    <div class="info-content">
                        <p><strong>Descri√ß√£o:</strong> Uma contrabandista humana de Lonisivinuss que se tornou uma das poucas pessoas em quem Maya confia. Marina conhece todos os canais e rotas secretas da regi√£o aqu√°tica.</p>
                        
                        <p><strong>Apar√™ncia:</strong> Mulher resistente com pele bronzeada pelo sol aqu√°tico, sempre carregando equipamentos de mergulho modificados. Tem tatuagens que brilham fracamente - nanotecnologia decorativa.</p>
                        
                        <p><strong>Personalidade:</strong> Pragm√°tica e leal, com um senso de humor sarc√°stico. N√£o faz muitas perguntas sobre o passado de Maya, mas oferece ajuda quando necess√°rio.</p>
                        
                        <p><strong>Habilidades:</strong> Pilotagem aqu√°tica, conhecimento de rotas comerciais, contatos no submundo.</p>
                        
                        <p><strong>Relacionamento com Maya:</strong> Amiga e aliada. Uma das poucas rela√ß√µes "normais" na vida de Maya, representando uma √¢ncora √† humanidade.</p>
                    </div>
                </div>

                <div class="quote">
                    "As pessoas ao nosso redor moldam quem somos tanto quanto nossas pr√≥prias escolhas. Para Maya, cada encontro √© uma oportunidade de descobrir mais sobre si mesma."
                </div>
            </div>
        </div>

        <!-- SE√á√ÉO GUIA -->
        <div id="guide" class="content">
            <div class="guide-section">
                <h2>üìñ Guia Completo do Universo</h2>
                
                <h3>üéÆ Como Usar Este Sistema</h3>
                <div class="info-box">
                    <div class="info-header">üìã Funcionalidades Principais</div>
                    <div class="info-content">
                        <ul>
                            <li><strong>Salvamento Autom√°tico:</strong> Todas as suas edi√ß√µes s√£o salvas automaticamente no navegador</li>
                            <li><strong>Backup/Restaurar:</strong> Use os bot√µes no canto inferior direito para fazer backup dos seus dados</li>
                            <li><strong>Edi√ß√£o Completa:</strong> Todos os campos podem ser editados para personalizar sua vers√£o de Maya</li>
                            <li><strong>Responsivo:</strong> Funciona perfeitamente em desktop, tablet e celular</li>
                        </ul>
                    </div>
                </div>

                <h3>üåç Hist√≥ria do Mundo</h3>
                <div class="timeline">
                    <div class="timeline-item">
                        <h4>üèõÔ∏è Era Antiga (Per√≠odo Desconhecido)</h4>
                        <p>Civiliza√ß√£o avan√ßada desenvolve tecnologia de fus√£o humano-m√°quina. Ru√≠nas desta √©poca podem ser encontradas em Anaz, guardando segredos sobre as origens da cibern√©tica.</p>
                    </div>
                    
                    <div class="timeline-item">
                        <h4>‚öîÔ∏è Guerras de Unifica√ß√£o (50-30 anos atr√°s)</h4>
                        <p>Conflitos que estabeleceram o Centro Imperial como poder dominante. Karas tornou-se o bra√ßo militar do imp√©rio, enquanto outras regi√µes mantiveram relativa autonomia.</p>
                    </div>
                    
                    <div class="timeline-item">
                        <h4>üî¨ Projeto Prometeu (15-5 anos atr√°s)</h4>
                        <p>Dra. Elena Vasquez lidera pesquisas secretas para criar ciborgues de nova gera√ß√£o. Maya √© o prot√≥tipo mais avan√ßado, mas o projeto √© interrompido abruptamente.</p>
                    </div>
                    
                    <div class="timeline-item">
                        <h4>üåä Despertar de Maya (5 anos atr√°s)</h4>
                        <p>Maya desperta em um laborat√≥rio abandonado com mem√≥rias fragmentadas. Consegue escapar e eventualmente se estabelece em Lonisivinuss.</p>
                    </div>
                    
                    <div class="timeline-item">
                        <h4>üìÖ Presente</h4>
                        <p>Maya vive escondida em Lonisivinuss, ocasionalmente realizando miss√µes enquanto busca pistas sobre seu passado. Suas aventuras come√ßam aqui.</p>
                    </div>
                </div>

                <h3>üîß Tecnologia do Mundo</h3>
                <div class="info-box">
                    <div class="info-header">ü§ñ N√≠veis de Ciborgues</div>
                    <div class="info-content">
                        <p><strong>B√°sico:</strong> Implantes simples - membros prot√©ticos, aprimoramentos oculares b√°sicos</p>
                        <p><strong>Avan√ßado:</strong> Integra√ß√£o parcial - √≥rg√£os artificiais, interfaces neurais, melhorias f√≠sicas</p>
                        <p><strong>Elite (Maya):</strong> Fus√£o completa - consci√™ncia h√≠brida, habilidades especiais, mem√≥rias artificiais</p>
                        <p><strong>Experimentais:</strong> Prot√≥tipos √∫nicos com capacidades desconhecidas</p>
                    </div>
                </div>

                <h3>üé≤ Sistema de Jogo Sugerido</h3>
                <div class="adventure-box">
                    <div class="adventure-header">‚ö° Mec√¢nicas B√°sicas</div>
                    <div class="adventure-content">
                        <h4>üéØ Testes de Habilidade</h4>
                        <p>Use 2d6 + atributo relevante para a maioria dos testes. Dificuldades sugeridas:</p>
                        <ul>
                            <li><strong>F√°cil:</strong> 8+</li>
                            <li><strong>Moderado:</strong> 10+</li>
                            <li><strong>Dif√≠cil:</strong> 12+</li>
                            <li><strong>Extremo:</strong> 14+</li>
                        </ul>
                        
                        <h4>‚öîÔ∏è Sistema de Combate</h4>
                        <p>Iniciativa: 1d6 + Destreza. A√ß√µes por turno: mover + uma a√ß√£o principal.</p>
                        <p>Dano das habilidades conforme descrito na se√ß√£o de habilidades.</p>
                        
                        <h4>üß† Sistema de Mem√≥rias</h4>
                        <p>Maya pode recuperar fragmentos de mem√≥ria em momentos dram√°ticos. O mestre pode revelar informa√ß√µes importantes atrav√©s de flashbacks ativados por situa√ß√µes espec√≠ficas.</p>
                    </div>
                </div>

                <h3>üé® Inspira√ß√µes Visuais</h3>
                
                <!-- Galeria Visual de Maya -->
                <div class="adventure-box">
                    <div class="adventure-header">üé≠ Refer√™ncia Visual Oficial - Maya</div>
                    <div class="adventure-content">
                        <div class="maya-image-container" style="margin-bottom: 2rem;">
                            <img src="maya-character-art.jpg" alt="Maya - Arte Conceitual Oficial" class="maya-character-image" style="max-width: 400px;">
                        </div>
                        
                        <h4>üîç An√°lise da Arte Conceitual</h4>
                        <p><strong>Integra√ß√£o Cibern√©tica:</strong> A arte mostra perfeitamente como os implantes de Maya se integram organicamente ao seu corpo. As placas met√°licas nos bra√ßos e pernas n√£o parecem "grudadas", mas sim parte natural de sua anatomia.</p>
                        
                        <p><strong>Express√£o Humana:</strong> Seus olhos e express√£o facial mant√™m total humanidade, mostrando que, apesar das modifica√ß√µes, Maya preserva sua ess√™ncia emocional e personalidade.</p>
                        
                        <p><strong>Estilo Pr√°tico:</strong> Roupas em tons terrosos e funcionais que permitem movimento, mas tamb√©m ajudam a camuflar suas modifica√ß√µes quando necess√°rio para passar despercebida.</p>
                        
                        <p><strong>Postura Confiante:</strong> A posi√ß√£o ereta e olhar direto demonstram a determina√ß√£o de Maya, mesmo carregando o peso das incertezas sobre seu passado.</p>
                    </div>
                </div>
                
                <div class="concept-visual">
                    <div class="concept-title">Aesthetic Cyberpunk Aqu√°tico</div>
                    <div class="concept-description">
                        Imagine Blade Runner encontrando Waterworld. Neon refletindo em canais escuros, 
                        cidades flutuantes conectadas por pontes de luz, e a constante presen√ßa da 
                        chuva criando uma atmosfera melanc√≥lica mas esperan√ßosa.
                    </div>
                </div>

                <div class="scenario">
                    <div class="scenario-title">üí° Exemplo de Cena Dram√°tica</div>
                    <p><em>"Maya caminha pelos canais de Lonisivinuss quando seus implantes come√ßam a pulsar em sincronia com as luzes da cidade. Por um momento, ela v√™ atrav√©s dos olhos de outra pessoa - uma laborat√≥rio est√©ril, a voz suave da Dra. Elena dizendo 'Voc√™ ser√° especial, minha querida.' A vis√£o se esvai, deixando Maya com mais perguntas que respostas, mas tamb√©m com uma estranha sensa√ß√£o de saudade de algo que nunca soube que perdeu."</em></p>
                </div>

                <h3>üöÄ Ideias para Aventuras</h3>
                <div class="info-box">
                    <div class="info-header">üó∫Ô∏è Ganchos de Aventura</div>
                    <div class="info-content">
                        <ul>
                            <li><strong>A Mensagem Perdida:</strong> Maya intercepta uma transmiss√£o da Dra. Elena ainda viva</li>
                            <li><strong>O Irm√£o Perdido:</strong> Outro prot√≥tipo do Projeto Prometeu aparece, mas hostil</li>
                            <li><strong>Infiltra√ß√£o em Morred:</strong> Miss√£o para recuperar dados em territ√≥rio de Skye</li>
                            <li><strong>A Ca√ßada de Orion:</strong> O comandante finalmente rastreia Maya at√© Lonisivinuss</li>
                            <li><strong>Segredos de Anaz:</strong> Expedi√ß√£o √†s ru√≠nas pode revelar a origem de toda tecnologia ciborgue</li>
                            <li><strong>A Verdade sobre Echo:</strong> A identidade do informante misterioso √© finalmente revelada</li>
                        </ul>
                    </div>
                </div>

                <div class="quote">
                    "O universo de Maya √© vasto e cheio de possibilidades. Use este guia como base, mas n√£o tenha medo de adicionar seus pr√≥prios elementos e mist√©rios. A hist√≥ria de Maya √©, no fim das contas, a hist√≥ria que voc√™s contam juntos na mesa."
                </div>
            </div>
        </div>
    </div>

    <script>
        /* 
         * SISTEMA DE PERSIST√äNCIA MELHORADO
         * - Salvamento autom√°tico com debounce (500ms)
         * - Salvamento antes de sair da p√°gina  
         * - Salvamento peri√≥dico (30s)
         * - Verifica√ß√£o de integridade dos dados
         * - Indicadores visuais de status
         * - Tratamento de erros robusto
         * - Compatibilidade cross-browser
         */

        // Sistema de navega√ß√£o
        function showSection(sectionId) {
            // Esconder todas as se√ß√µes
            const sections = document.querySelectorAll('.content');
            sections.forEach(section => section.classList.remove('active'));
            
            // Mostrar se√ß√£o selecionada
            document.getElementById(sectionId).classList.add('active');
            
            // Atualizar menu ativo
            const navItems = document.querySelectorAll('.nav-item');
            navItems.forEach(item => item.classList.remove('active'));
            event.target.classList.add('active');
            
            // Esconder editor de cidades quando mudar de se√ß√£o
            if (sectionId !== 'map') {
                hideAllCityEditors();
            }
        }

        // Sistema de salvamento autom√°tico
        function saveData() {
            const data = {
                // Dados da ficha
                charName: document.getElementById('char-name').value,
                charClass: document.getElementById('char-class').value,
                str: document.getElementById('str').value,
                dex: document.getElementById('dex').value,
                con: document.getElementById('con').value,
                int: document.getElementById('int').value,
                wis: document.getElementById('wis').value,
                cha: document.getElementById('cha').value,
                hp: document.getElementById('hp').value,
                credits: document.getElementById('credits').value,
                class: document.getElementById('class').value,
                equipment: document.getElementById('equipment').value,
                notes: document.getElementById('notes').value,
                
                // Habilidades
                abilities: {},
                
                // Aventuras
                adventures: {},
                
                // Cidades
                cities: {}
            };
            
            // Salvar habilidades
            for (let i = 1; i <= 7; i++) {
                const nameEl = document.getElementById(`ability${i}-name`);
                const descEl = document.getElementById(`ability${i}-desc`);
                const mechEl = document.getElementById(`ability${i}-mech`);
                const visualEl = document.getElementById(`ability${i}-visual`);
                
                if (nameEl) {
                    data.abilities[i] = {
                        name: nameEl.value,
                        desc: descEl ? descEl.value : '',
                        mech: mechEl ? mechEl.value : '',
                        visual: visualEl ? visualEl.value : ''
                    };
                }
            }
            
            // Salvar aventuras
            document.querySelectorAll('.adventure-edit-box').forEach(adventureBox => {
                const id = adventureBox.id.split('-')[1];
                const titleEl = document.getElementById(`adventure-${id}-title`);
                if (titleEl) {
                    data.adventures[id] = {
                        title: titleEl.value,
                        summary: document.getElementById(`adventure-${id}-summary`)?.value || '',
                        opening: document.getElementById(`adventure-${id}-opening`)?.value || '',
                        events: document.getElementById(`adventure-${id}-events`)?.value || '',
                        npcs: document.getElementById(`adventure-${id}-npcs`)?.value || '',
                        abilities: document.getElementById(`adventure-${id}-abilities`)?.value || '',
                        rewards: document.getElementById(`adventure-${id}-rewards`)?.value || '',
                        date: document.getElementById(`adventure-${id}-date`)?.value || '',
                        notes: document.getElementById(`adventure-${id}-notes`)?.value || ''
                    };
                }
            });
            
            // Salvar dados das cidades
            const cities = ['uluth', 'winter', 'morred', 'anaz', 'lonisivinuss', 'karas', 'imperial'];
            cities.forEach(city => {
                data.cities[city] = {};
                const fields = ['type', 'characteristics', 'population', 'relevance', 'dangers', 'resources', 'status', 'danger', 'interest', 'artifacts', 'mysteries', 'maya', 'surveillance', 'maya-danger'];
                fields.forEach(field => {
                    const el = document.getElementById(`${city}-${field}`);
                    if (el) {
                        data.cities[city][field] = el.value;
                    }
                });
            });
            
            localStorage.setItem('mayaRpgData', JSON.stringify(data));
            showSaveIndicator();
        }

        // Carregar dados salvos
        function loadData() {
            const savedData = localStorage.getItem('mayaRpgData');
            if (!savedData) {
                console.log('‚ÑπÔ∏è Nenhum dado salvo encontrado');
                return;
            }
            
            try {
                const data = JSON.parse(savedData);
                console.log('üìÇ Carregando dados salvos de:', data.lastSaved || 'data desconhecida');
                
                // Fun√ß√£o auxiliar para definir valor com seguran√ßa
                function safeSetValue(id, value) {
                    const element = document.getElementById(id);
                    if (element && value !== undefined && value !== null) {
                        element.value = value;
                    }
                }
                
                // Carregar dados da ficha
                safeSetValue('char-name', data.charName);
                safeSetValue('char-class', data.charClass);
                safeSetValue('str', data.str);
                safeSetValue('dex', data.dex);
                safeSetValue('con', data.con);
                safeSetValue('int', data.int);
                safeSetValue('wis', data.wis);
                safeSetValue('cha', data.cha);
                safeSetValue('hp', data.hp);
                safeSetValue('credits', data.credits);
                safeSetValue('class', data.class);
                safeSetValue('equipment', data.equipment);
                safeSetValue('notes', data.notes);
                
                // Carregar dados de apar√™ncia
                safeSetValue('appearance-desc', data.appearanceDesc);
                safeSetValue('modifications', data.modifications);
                
                // Carregar habilidades
                if (data.abilities) {
                    Object.keys(data.abilities).forEach(id => {
                        const ability = data.abilities[id];
                        if (ability) {
                            safeSetValue(`ability${id}-name`, ability.name);
                            safeSetValue(`ability${id}-desc`, ability.desc);
                            safeSetValue(`ability${id}-mech`, ability.mech);
                            safeSetValue(`ability${id}-visual`, ability.visual);
                        }
                    });
                }
                
                // Carregar aventuras existentes
                if (data.adventures) {
                    Object.keys(data.adventures).forEach(id => {
                        const adventure = data.adventures[id];
                        if (adventure) {
                            safeSetValue(`adventure-${id}-title`, adventure.title);
                            safeSetValue(`adventure-${id}-summary`, adventure.summary);
                            safeSetValue(`adventure-${id}-opening`, adventure.opening);
                            safeSetValue(`adventure-${id}-events`, adventure.events);
                            safeSetValue(`adventure-${id}-npcs`, adventure.npcs);
                            safeSetValue(`adventure-${id}-abilities`, adventure.abilities);
                            safeSetValue(`adventure-${id}-rewards`, adventure.rewards);
                            safeSetValue(`adventure-${id}-date`, adventure.date);
                            safeSetValue(`adventure-${id}-notes`, adventure.notes);
                        }
                    });
                    
                    // Atualizar contador de aventuras para n√£o sobrescrever
                    const adventureIds = Object.keys(data.adventures).map(id => parseInt(id)).filter(id => !isNaN(id));
                    if (adventureIds.length > 0) {
                        adventureCounter = Math.max(...adventureIds);
                    }
                }
                
                // Carregar dados das cidades
                if (data.cities) {
                    Object.keys(data.cities).forEach(city => {
                        const cityData = data.cities[city];
                        if (cityData) {
                            Object.keys(cityData).forEach(field => {
                                safeSetValue(`${city}-${field}`, cityData[field]);
                            });
                        }
                    });
                }
                
                console.log('‚úÖ Todos os dados carregados com sucesso!');
                
            } catch (error) {
                console.error('‚ùå Erro ao carregar dados salvos:', error);
                alert('Erro ao carregar dados salvos. Os dados podem estar corrompidos.');
            }
        }

        // Indicador visual de salvamento
        function showSaveIndicator() {
            const indicator = document.getElementById('save-indicator');
            const now = new Date();
            indicator.innerHTML = `‚úì Salvo automaticamente √†s ${now.toLocaleTimeString()}`;
            indicator.style.opacity = '1';
            setTimeout(() => {
                indicator.style.opacity = '0';
            }, 3000);
        }

        // Exportar dados
        function exportData() {
            saveData(); // Garantir que est√° tudo salvo
            const data = localStorage.getItem('mayaRpgData');
            if (data) {
                const blob = new Blob([data], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'maya_rpg_backup.json';
                a.click();
                URL.revokeObjectURL(url);
            }
        }

        // Importar dados
        function importData() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json';
            input.onchange = function(e) {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        try {
                            const data = e.target.result;
                            localStorage.setItem('mayaRpgData', data);
                            location.reload(); // Recarregar p√°gina para aplicar os dados
                        } catch (error) {
                            alert('Erro ao importar arquivo. Verifique se √© um backup v√°lido.');
                        }
                    };
                    reader.readAsText(file);
                }
            };
            input.click();
        }

        // Resetar dados
        function resetData() {
            if (confirm('Tem certeza que deseja apagar todos os dados? Esta a√ß√£o n√£o pode ser desfeita.')) {
                localStorage.removeItem('mayaRpgData');
                location.reload();
            }
        }

        // Sistema de edi√ß√£o de cidades
        let currentEditingCity = null;

        function toggleCityEdit(cityId) {
            // Se j√° est√° editando esta cidade, esconder
            if (currentEditingCity === cityId) {
                hideAllCityEditors();
                return;
            }
            
            // Esconder todas as se√ß√µes de edi√ß√£o
            hideAllCityEditors();
            
            // Mostrar a se√ß√£o da cidade selecionada
            const citySection = document.getElementById(`city-${cityId}`);
            const indicator = document.getElementById('active-region-indicator');
            const regionName = document.getElementById('active-region-name');
            
            if (citySection) {
                citySection.style.display = 'block';
                indicator.style.display = 'block';
                regionName.textContent = citySection.querySelector('.info-header').textContent;
                currentEditingCity = cityId;
                
                // Destacar cidade ativa no mapa
                document.querySelectorAll('.city-node').forEach(node => {
                    node.classList.remove('active-city');
                });
                
                // Encontrar e destacar o n√≥ da cidade
                const cityNode = document.querySelector(`[onclick="toggleCityEdit('${cityId}')"]`);
                if (cityNode) {
                    cityNode.classList.add('active-city');
                }
            }
        }

        function hideAllCityEditors() {
            document.querySelectorAll('.city-edit-section').forEach(section => {
                section.style.display = 'none';
            });
            document.getElementById('active-region-indicator').style.display = 'none';
            document.querySelectorAll('.city-node').forEach(node => {
                node.classList.remove('active-city');
            });
            currentEditingCity = null;
        }

        // Sistema de aventuras
        let adventureCounter = 0; // Come√ßar do zero - sem aventuras pr√©-populadas

        function addNewAdventure() {
            adventureCounter++;
            const container = document.getElementById('adventures-container');
            
            // Remover a mensagem de placeholder se existir
            const placeholder = container.querySelector('.concept-visual');
            if (placeholder) {
                placeholder.remove();
            }
            
            const adventureHTML = `
                <div class="adventure-edit-box" id="adventure-${adventureCounter}">
                    <div class="adventure-header">
                        <input type="text" style="background: transparent; border: none; color: white; font-size: 1.3rem; font-weight: bold; width: 80%;" 
                               placeholder="Nome da Aventura" id="adventure-${adventureCounter}-title" value="üÜï Nova Aventura">
                        <button onclick="deleteAdventure(${adventureCounter})" style="background: rgba(255,255,255,0.2); border: none; color: white; padding: 0.5rem; border-radius: 5px; cursor: pointer; margin-left: 1rem;">üóëÔ∏è</button>
                    </div>
                    <div class="adventure-content">
                        <div style="margin-bottom: 1.5rem;">
                            <h4>üìù Resumo da Sess√£o</h4>
                            <textarea class="stat-input" style="min-height: 100px;" placeholder="O que aconteceu nesta aventura?" id="adventure-${adventureCounter}-summary"></textarea>
                        </div>
                        
                        <div style="margin-bottom: 1.5rem;">
                            <h4>üé¨ Cena de Abertura</h4>
                            <textarea class="stat-input" style="min-height: 80px;" placeholder="Como a aventura come√ßou?" id="adventure-${adventureCounter}-opening"></textarea>
                        </div>

                        <div style="margin-bottom: 1.5rem;">
                            <h4>‚öîÔ∏è Principais Eventos</h4>
                            <textarea class="stat-input" style="min-height: 120px;" placeholder="O que aconteceu durante a aventura? Combates, descobertas, intera√ß√µes..." id="adventure-${adventureCounter}-events"></textarea>
                        </div>

                        <div style="margin-bottom: 1.5rem;">
                            <h4>üë• NPCs Encontrados</h4>
                            <textarea class="stat-input" style="min-height: 80px;" placeholder="Quais personagens apareceram?" id="adventure-${adventureCounter}-npcs"></textarea>
                        </div>

                        <div style="margin-bottom: 1.5rem;">
                            <h4>‚ö° Habilidades Usadas</h4>
                            <textarea class="stat-input" style="min-height: 80px;" placeholder="Quais habilidades de Maya foram destaque?" id="adventure-${adventureCounter}-abilities"></textarea>
                        </div>

                        <div style="margin-bottom: 1.5rem;">
                            <h4>üéÅ Recompensas e Descobertas</h4>
                            <textarea class="stat-input" style="min-height: 80px;" placeholder="O que Maya ganhou ou descobriu?" id="adventure-${adventureCounter}-rewards"></textarea>
                        </div>

                        <div style="margin-bottom: 1.5rem;">
                            <h4>üìÖ Data da Sess√£o</h4>
                            <input type="date" class="stat-input" id="adventure-${adventureCounter}-date">
                        </div>

                        <div style="margin-bottom: 1.5rem;">
                            <h4>üìù Notas do Mestre</h4>
                            <textarea class="stat-input" style="min-height: 100px;" placeholder="Observa√ß√µes, ideias para pr√≥ximas sess√µes, rea√ß√µes dos jogadores..." id="adventure-${adventureCounter}-notes"></textarea>
                        </div>
                    </div>
                </div>
            `;
            
            container.insertAdjacentHTML('beforeend', adventureHTML);
            
            // Scroll at√© a nova aventura
            document.getElementById(`adventure-${adventureCounter}`).scrollIntoView({ 
                behavior: 'smooth', 
                block: 'start' 
            });
        }

        function deleteAdventure(id) {
            if (confirm('Tem certeza que deseja excluir esta aventura?')) {
                const adventure = document.getElementById(`adventure-${id}`);
                if (adventure) {
                    adventure.remove();
                    saveData(); // Salvar ap√≥s excluir
                }
            }
        }

        function toggleAdventureList() {
            const list = document.getElementById('adventure-list');
            const listContent = document.getElementById('adventure-list-content');
            
            if (list.style.display === 'none') {
                // Montar lista de aventuras
                listContent.innerHTML = '';
                const adventures = document.querySelectorAll('.adventure-edit-box');
                
                if (adventures.length === 0) {
                    listContent.innerHTML = '<div style="text-align: center; color: #7f8c8d; padding: 2rem;">üìù Nenhuma aventura criada ainda. Use o bot√£o "Adicionar Nova Aventura" para come√ßar!</div>';
                } else {
                    adventures.forEach(adventure => {
                        const id = adventure.id.split('-')[1];
                        const titleEl = document.getElementById(`adventure-${id}-title`);
                        const dateEl = document.getElementById(`adventure-${id}-date`);
                        
                        const title = titleEl ? titleEl.value || 'Aventura sem nome' : 'Aventura sem nome';
                        const date = dateEl ? dateEl.value || 'Data n√£o definida' : 'Data n√£o definida';
                        
                        const item = document.createElement('div');
                        item.style.cssText = 'padding: 1rem; border-bottom: 1px solid #eee; cursor: pointer; transition: background 0.3s;';
                        item.innerHTML = `
                            <div style="font-weight: bold; color: #2c3e50;">${title}</div>
                            <div style="color: #7f8c8d; font-size: 0.9rem;">Data: ${date}</div>
                        `;
                        item.onclick = () => {
                            adventure.scrollIntoView({ behavior: 'smooth', block: 'start' });
                            list.style.display = 'none';
                        };
                        item.onmouseover = () => item.style.background = '#f8f9fa';
                        item.onmouseout = () => item.style.background = 'white';
                        
                        listContent.appendChild(item);
                    });
                }
                
                list.style.display = 'block';
            } else {
                list.style.display = 'none';
            }
        }

        // Salvar automaticamente quando houver mudan√ßas
        document.addEventListener('input', function(e) {
            if (e.target.matches('input, textarea')) {
                // Debounce para evitar salvar muito frequentemente
                clearTimeout(window.saveTimeout);
                window.saveTimeout = setTimeout(saveData, 500);
            }
        });

        // Salvar quando sair da p√°gina
        window.addEventListener('beforeunload', function() {
            saveData();
        });

        // Salvar periodicamente (a cada 30 segundos)
        setInterval(saveData, 30000);

        // Verificar se localStorage est√° dispon√≠vel
        function isLocalStorageAvailable() {
            try {
                const test = 'test';
                localStorage.setItem(test, test);
                localStorage.removeItem(test);
                return true;
            } catch(e) {
                return false;
            }
        }

        // Inicializar quando a p√°gina carregar
        document.addEventListener('DOMContentLoaded', function() {
            if (!isLocalStorageAvailable()) {
                alert('‚ö†Ô∏è Aviso: O salvamento autom√°tico pode n√£o funcionar neste navegador. Use o bot√£o de Backup para salvar seus dados.');
                showUnsavedIndicator();
                return;
            }
            
            // Teste inicial de salvamento
            try {
                localStorage.setItem('mayaRpgTest', 'test');
                localStorage.removeItem('mayaRpgTest');
                console.log('‚úÖ Sistema de salvamento funcionando');
            } catch(e) {
                console.warn('‚ö†Ô∏è Problema detectado no sistema de salvamento');
                showUnsavedIndicator();
            }
            
            const savedData = localStorage.getItem('mayaRpgData');
            
            loadData();
            
            // Verificar se h√° dados salvos e mostrar confirma√ß√£o
            if (savedData) {
                try {
                    const data = JSON.parse(savedData);
                    const lastSaved = data.lastSaved ? new Date(data.lastSaved).toLocaleString() : 'data desconhecida';
                    console.log(`‚úÖ Dados carregados de: ${lastSaved}`);
                    showLoadIndicator();
                } catch(e) {
                    console.warn('‚ö†Ô∏è Dados salvos podem estar corrompidos');
                }
            } else {
                console.log('üÜï Primeira vez usando o sistema - dados padr√£o carregados');
            }
        });

        // Mostrar indicador de carregamento
        function showLoadIndicator() {
            const indicator = document.getElementById('load-indicator');
            const savedData = localStorage.getItem('mayaRpgData');
            
            if (indicator && savedData) {
                try {
                    const data = JSON.parse(savedData);
                    const lastSaved = data.lastSaved ? new Date(data.lastSaved).toLocaleString() : 'data desconhecida';
                    indicator.innerHTML = `üìÇ Dados carregados de: ${lastSaved}`;
                } catch(e) {
                    indicator.innerHTML = 'üìÇ Dados carregados com sucesso!';
                }
                
                indicator.style.opacity = '1';
                setTimeout(() => {
                    indicator.style.opacity = '0';
                }, 4000);
            }
        }

        // Melhorar o sistema de salvamento para garantir persist√™ncia
        function saveData() {
            if (!isLocalStorageAvailable()) {
                console.warn('LocalStorage n√£o dispon√≠vel - dados n√£o salvos');
                showUnsavedIndicator();
                return false;
            }

            try {
                const data = {
                    // Timestamp para verificar quando foi salvo
                    lastSaved: new Date().toISOString(),
                    
                    // Dados da ficha
                    charName: document.getElementById('char-name')?.value || '',
                    charClass: document.getElementById('char-class')?.value || '',
                    str: document.getElementById('str')?.value || '',
                    dex: document.getElementById('dex')?.value || '',
                    con: document.getElementById('con')?.value || '',
                    int: document.getElementById('int')?.value || '',
                    wis: document.getElementById('wis')?.value || '',
                    cha: document.getElementById('cha')?.value || '',
                    hp: document.getElementById('hp')?.value || '',
                    credits: document.getElementById('credits')?.value || '',
                    class: document.getElementById('class')?.value || '',
                    equipment: document.getElementById('equipment')?.value || '',
                    notes: document.getElementById('notes')?.value || '',
                    
                    // Dados de apar√™ncia
                    appearanceDesc: document.getElementById('appearance-desc')?.value || '',
                    modifications: document.getElementById('modifications')?.value || '',
                    
                    // Habilidades
                    abilities: {},
                    
                    // Aventuras
                    adventures: {},
                    
                    // Cidades
                    cities: {}
                };
                
                // Salvar habilidades
                for (let i = 1; i <= 7; i++) {
                    const nameEl = document.getElementById(`ability${i}-name`);
                    const descEl = document.getElementById(`ability${i}-desc`);
                    const mechEl = document.getElementById(`ability${i}-mech`);
                    const visualEl = document.getElementById(`ability${i}-visual`);
                    
                    if (nameEl) {
                        data.abilities[i] = {
                            name: nameEl.value || '',
                            desc: descEl ? descEl.value || '' : '',
                            mech: mechEl ? mechEl.value || '' : '',
                            visual: visualEl ? visualEl.value || '' : ''
                        };
                    }
                }
                
                // Salvar aventuras
                document.querySelectorAll('.adventure-edit-box').forEach(adventureBox => {
                    const id = adventureBox.id.split('-')[1];
                    const titleEl = document.getElementById(`adventure-${id}-title`);
                    if (titleEl) {
                        data.adventures[id] = {
                            title: titleEl.value || '',
                            summary: document.getElementById(`adventure-${id}-summary`)?.value || '',
                            opening: document.getElementById(`adventure-${id}-opening`)?.value || '',
                            events: document.getElementById(`adventure-${id}-events`)?.value || '',
                            npcs: document.getElementById(`adventure-${id}-npcs`)?.value || '',
                            abilities: document.getElementById(`adventure-${id}-abilities`)?.value || '',
                            rewards: document.getElementById(`adventure-${id}-rewards`)?.value || '',
                            date: document.getElementById(`adventure-${id}-date`)?.value || '',
                            notes: document.getElementById(`adventure-${id}-notes`)?.value || ''
                        };
                    }
                });
                
                // Salvar dados das cidades
                const cities = ['uluth', 'winter', 'morred', 'anaz', 'lonisivinuss', 'karas', 'imperial'];
                cities.forEach(city => {
                    data.cities[city] = {};
                    const fields = ['type', 'characteristics', 'population', 'relevance', 'dangers', 'resources', 'status', 'danger', 'interest', 'artifacts', 'mysteries', 'maya', 'surveillance', 'maya-danger'];
                    fields.forEach(field => {
                        const el = document.getElementById(`${city}-${field}`);
                        if (el) {
                            data.cities[city][field] = el.value || '';
                        }
                    });
                });
                
                // Salvar com verifica√ß√£o
                const dataString = JSON.stringify(data);
                localStorage.setItem('mayaRpgData', dataString);
                
                // Verificar se foi salvo corretamente
                const verified = localStorage.getItem('mayaRpgData');
                if (verified === dataString) {
                    console.log('üíæ Dados salvos com sucesso:', new Date().toLocaleTimeString());
                    showSaveIndicator();
                    return true;
                } else {
                    console.error('‚ùå Erro na verifica√ß√£o do salvamento');
                    showUnsavedIndicator();
                    return false;
                }
                
            } catch (error) {
                console.error('‚ùå Erro ao salvar dados:', error);
                showUnsavedIndicator();
                return false;
            }
        }

        // Mostrar aviso de dados n√£o salvos
        function showUnsavedIndicator() {
            const indicator = document.getElementById('unsaved-indicator');
            if (indicator) {
                indicator.style.opacity = '1';
                setTimeout(() => {
                    indicator.style.opacity = '0';
                }, 5000);
            }
        }
    </script>
</body>
</html>
